{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "src/js/Main.js",
    "src/js/modules/AnimationManager.js",
    "src/js/modules/AnimationStateMachine.js",
    "src/js/modules/Constants.js",
    "src/js/modules/Helpers.js",
    "src/js/modules/Mutations.js",
    "src/js/modules/ObserverManager.js",
    "src/js/modules/Render.js",
    "src/js/modules/Settings.js"
  ],
  "names": [],
  "mappings": "AAAA;;;ACAA;;AACA;;AACA;;AAEA,CAAE,MAAD,IAAY;AACT,MAAI,aAAa,GAAI,SAAD,IAAe;AAE/B;AACA,mDAAgC,SAAhC,EAH+B,CAK/B;;AACA;AACH,GAPD;;AASA,MAAI,OAAO,GAAI,SAAD,IAAe;AAEzB;AACA,oDAAiC,SAAjC,EAHyB,CAKzB;;AACA;AACH,GAPD;;AASA,EAAA,MAAM,CAAC,SAAP,GAAmB;AACf,IAAA,aAAa,EAAE,aADA;AAEf,IAAA,OAAO,EAAE,0CAFM;AAGf,IAAA,WAAW,EAAE,oCAHE;AAIf,IAAA,aAAa,EAAE,iCAJA;AAKf,IAAA,gBAAgB,EAAE,iCALH;AAMf,IAAA,gBAAgB,EAAE,iCANH;AAOf,IAAA,OAAO,EAAE,OAPM;AAQf,IAAA,UAAU,EAAE,qCARG;AASf,IAAA,cAAc,EAAE;AATD,GAAnB;AAWH,CA9BD,EA8BG,MA9BH;;;;;;;;;;ACJA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAI,qBAAqB,GAAG,KAA5B;;AACO,MAAM,cAAc,GAAG,MAAM;AAChC,MAAI,qBAAJ,EAA2B;AACvB,IAAA,OAAO,CAAC,KAAR,CAAc,mJAAd;AACH,GAH+B,CAKhC;;;AACA,MAAI,aAAa,GAAG,yBAAW,4BAAkB,WAA7B,CAApB;;AACA,MAAI,CAAC,aAAL,EAAoB;AAChB,IAAA,OAAO,CAAC,GAAR,CAAa,qFAAoF,4BAAkB,WAAY,EAA/H;AACA;AACH,GAV+B,CAYhC;;;AACA,0DAbgC,CAehC;;AACA,0DAhBgC,CAkBhC;;AACA,2DAnBgC,CAqBhC;;AACA,8BAtBgC,CAwBhC;AACA;;AACA,MAAI,4BAAkB,cAAtB,EAAsC;AAClC,IAAA,UAAU,CAAC,MAAM,4BAA4B,EAAnC,EAAuC,4BAAkB,kBAAzD,CAAV;AACH,GA5B+B,CA8BhC;;;AACA,MAAI,4BAAkB,UAAtB,EAAkC;AAC9B,IAAA,UAAU,CAAC,MAAM,wBAAP,EAAmB,IAAnB,CAAV;AACH;;AAED,EAAA,qBAAqB,GAAG,IAAxB,CAnCgC,CAqChC;;AACA,EAAA,kBAAkB;AACrB,CAvCM;;;;AA0CP,MAAM,4BAA4B,GAAG,MAAM;AACvC,sCAAoB;AAChB,IAAA,IAAI,EAAE,qBADU;AAEhB,IAAA,QAAQ,EAAG,SAAD,IAAe;AACrB;AACH;AAJe,GAApB;AAMH,CAPD;;AAUA,MAAM,kBAAkB,GAAG,MAAM;AAC7B,2BAAW,4BAAkB,WAA7B,EAA2C,QAAD,IAAc;AAEpD,QAAG,QAAQ,CAAC,OAAZ,EAAqB;AACjB;AACA,UAAG,CAAC,qBAAJ,EAA2B;AACvB,YAAI,QAAQ,CAAC,MAAT,IAAmB,IAAvB,EAA6B;AACzB,UAAA,QAAQ,CAAC,MAAT;AACA,UAAA,OAAO,CAAC,GAAR,CAAa,iFAAgF,4BAAkB,WAAY,IAA3H;AACA,UAAA,cAAc;AACjB;AACJ;AACJ,KATD,MASO;AACH;AACA,UAAG,qBAAH,EAA0B;AACtB,QAAA,OAAO,CAAC,GAAR,CAAa,qEAAoE,4BAAkB,WAAY,EAA/G;AACA,QAAA,mBAAmB;AACtB;AACJ;AACJ,GAlBD;AAmBH,CApBD;;AAsBO,MAAM,mBAAmB,GAAG,MAAM;AAErC;AACA,gCAHqC,CAKrC;;AACA,sDANqC,CAQrC;;AACA,0CATqC,CAWrC;;AACA;AAEA,EAAA,qBAAqB,GAAG,KAAxB;AACH,CAfM;;;;AAiBA,MAAM,sBAAsB,GAAG,MAAM;AACxC,EAAA,mBAAmB;AACnB,EAAA,cAAc;AACjB,CAHM;;;;;;;;;;;;AClGP;;AACA;;AACA;;AAEO,MAAM,YAAY,GAAG;AACxB,EAAA,WAAW,EAAE,CADW;AAExB,EAAA,QAAQ,EAAE,EAFc;AAGxB,EAAA,mBAAmB,EAAE;AAHG,CAArB;;;AAMA,MAAM,yBAAyB,GAAG,MAAM;AAC3C;AACA,EAAA,oBAAoB,CAAE,KAAD,IAAW;AAC5B,IAAA,OAAO,CAAC,GAAR,CAAa,GAAE,KAAM,6BAArB;AACH,GAFmB,CAApB;AAGH,CALM;;;;AAOA,MAAM,kBAAkB,GAAG,CAAC,QAAQ,GAAG,IAAZ,KAAqB;AACnD,EAAA,oBAAoB,CAAE,KAAD,IAAW;AAC5B,IAAA,OAAO,CAAC,GAAR,CAAa,GAAE,KAAM,iCAArB;AACA,IAAA,0BAA0B,GAFE,CAI5B;;AACA,IAAA,UAAU,CAAC,MAAM,8BAAP,EAA0B,GAA1B,CAAV;AACH,GANmB,CAApB;AAOH,CARM,C,CAUP;;;;AACA,MAAM,WAAW,GAAG;AAChB,EAAA,EAAE,EAAE,EADY;AAEhB,EAAA,UAAU,EAAE,IAFI;AAGhB,EAAA,KAAK,EAAE,CAHS;AAIhB,EAAA,MAAM,EAAE,IAJQ;AAKhB,EAAA,SAAS,EAAE,EALK;AAMhB,EAAA,gBAAgB,EAAE;AANF,CAApB;AASA,IAAI,eAAe,GAAG,CAAtB,C,CAAyB;;AAEzB,MAAM,oBAAoB,GAAI,IAAD,IAAU;AACnC,MAAI,WAAW,GAAG,QAAQ,CAAC,oBAAT,CAA8B,GAA9B,CAAlB,CADmC,CAGnC;AACA;;AACA,MAAI,WAAW,GAAG,CAAC,GAAG,WAAJ,EAAiB,MAAjB,CAAwB,IAAI,IAAI;AAC9C,QAAI,UAAU,GAAG,MAAM,CAAC,OAAP,CAAe,IAAI,CAAC,UAApB,EAAgC,GAAhC,CAAoC,CAAC,IAAI,CAAC,CAAC,CAAD,CAA1C,CAAjB;AACA,WAAO,UAAU,CAAC,IAAX,CAAgB,CAAC,IAAK,qBAAD,CAAwB,IAAxB,CAA6B,CAAC,CAAC,IAA/B,CAArB,CAAP;AACH,GAHiB,CAAlB,CALmC,CAUnC;;AACA,MAAI,SAAS,GAAG,WAAW,CAAC,MAAZ,CAAmB,IAAI,IAAI,CAAC,IAAI,CAAC,YAAL,CAAkB,2BAAlB,CAA5B,CAAhB;;AAEA,EAAA,SAAS,CAAC,OAAV,CAAkB,CAAC,IAAD,EAAO,CAAP,KAAa;AAC3B,QAAI;AAAE,MAAA;AAAF,QAAiB,IAArB;AAEA,QAAI,SAAS,GAAG,KAAK,CAAC,IAAN,CAAW,UAAX,EAAuB,MAAvB,CAA8B,IAAI,IAAK,qBAAD,CAAwB,IAAxB,CAA6B,IAAI,CAAC,IAAlC,CAAtC,CAAhB;AAEA,QAAI,EAAE,GAAI,UAAS,EAAE,eAAgB,IAAG,CAAE,EAA1C;AACA,IAAA,IAAI,CAAC,YAAL,CAAkB,2BAAlB,EAAoC,EAApC;AAEA,QAAI,KAAK,GAAG,EAAE,GAAG;AAAL,KAAZ;AACA,IAAA,KAAK,CAAC,EAAN,GAAW,EAAX;AACA,IAAA,KAAK,CAAC,MAAN,GAAe,IAAI,CAAC,YAAL,CAAkB,iBAAlB,CAAf;AACA,IAAA,KAAK,CAAC,UAAN,GAAmB,IAAnB;AACA,IAAA,KAAK,CAAC,SAAN,GAAkB,gBAAgB,CAAC,SAAD,EAAY,IAAZ,CAAlC;AACA,IAAA,KAAK,CAAC,gBAAN,GAAyB,KAAzB;;AAEA,QAAI,SAAS,CAAC,MAAV,IAAoB,CAAxB,EAA2B;AACvB,MAAA,YAAY,CAAC,mBAAb,CAAiC,IAAjC,CAAsC,KAAtC;AACH,KAFD,MAEO;AACH,MAAA,YAAY,CAAC,QAAb,CAAsB,IAAtB,CAA2B,KAA3B;AACH;AACJ,GApBD;;AAsBA,EAAA,IAAI,CAAC,SAAS,CAAC,MAAX,CAAJ;AACH,CApCD;;AAuCA,MAAM,gBAAgB,GAAG,CAAC,EAAD,EAAK,IAAL,KAAc;AACnC,MAAI,MAAM,GAAG,EAAb;AACA,EAAA,EAAE,CAAC,OAAH,CAAW,CAAC,CAAD,EAAI,CAAJ,KAAU;AACjB,QAAI,MAAM,GAAG,EAAb;AAEA,IAAA,CAAC,CAAC,KAAF,CAAQ,IAAR,GAAe,KAAf,CAAqB,GAArB,EAA0B,OAA1B,CAAkC,CAAC,IAAI;AACnC,UAAI,CAAC,CAAC,MAAF,GAAW,CAAf,EAAkB;AACd,YAAI,GAAG,GAAG,CAAC,CAAC,KAAF,CAAQ,GAAR,EAAa,CAAb,EAAgB,IAAhB,EAAV;AACA,YAAI,GAAG,GAAG,CAAC,CAAC,KAAF,CAAQ,GAAR,EAAa,CAAb,EAAgB,IAAhB,EAAV;AAEA,YAAI,OAAO,GAAG,EAAd,CAJc,CAKd;;AACA,QAAA,GAAG,GAAG,GAAG,CAAC,OAAJ,CAAY,sBAAZ,EAAqC,CAAD,IAAO;AAC7C,UAAA,OAAO,CAAC,IAAR,CAAa,CAAC,CAAd;AACA,iBAAO,KAAP;AACH,SAHK,CAAN,CANc,CAWd;;AACA,QAAA,OAAO,CAAC,OAAR,CAAgB,GAAhB;AAEA,QAAA,MAAM,CAAC,GAAD,CAAN,GAAc;AACV,UAAA,KAAK,EAAE;AADG,SAAd;AAGH;AACJ,KAnBD;;AAqBA,QAAI,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC,IAAF,CAAO,OAAP,CAAe,WAAf,EAA4B,EAA5B,CAAD,CAAtB;;AACA,IAAA,MAAM,CAAC,IAAP,CAAY;AACR,MAAA,MAAM,EAAE,OADA;AAER,MAAA,SAAS,EAAE,OAFH;AAGR,MAAA,KAAK,EAAE;AAHC,KAAZ;AAMA,IAAA,IAAI,CAAC,YAAL,CAAmB,WAAU,CAAE,EAA/B,EAAkC,OAAlC;AACH,GAhCD,EAFmC,CAoCnC;;AACA,MAAI,4BAAkB,IAAlB,IAA0B,UAA9B,EAA0C;AACtC,IAAA,MAAM,CAAC,OAAP,CAAe,CAAC,CAAD,EAAI,CAAJ,KAAU;AACrB,UAAI,MAAM,GAAG,IAAI,CAAC,SAAL,GAAiB,CAAC,CAAC,MAAnB,GAA4B,MAAM,CAAC,WAAhD;AACA,MAAA,CAAC,CAAC,SAAF,GAAc,MAAd;AACA,MAAA,IAAI,CAAC,YAAL,CAAmB,WAAU,CAAE,EAA/B,EAAkC,MAAlC;AACH,KAJD;AAKH;;AAED,EAAA,MAAM,CAAC,IAAP,CAAY,CAAC,CAAD,EAAI,CAAJ,KAAU,CAAC,CAAC,SAAF,GAAc,CAAC,CAAC,SAAhB,GAA4B,CAA5B,GAAgC,CAAC,CAAC,SAAF,GAAc,CAAC,CAAC,SAAhB,GAA4B,CAAC,CAA7B,GAAiC,CAAvF,EA7CmC,CA+CnC;;AACA,MAAI,UAAU,GAAG,CAAjB;AACA,MAAI,QAAQ,GAAG,EAAf,CAjDmC,CAmDnC;;AACA,SAAO,UAAU,GAAG,MAAM,CAAC,MAA3B,EAAmC,UAAU,EAA7C,EAAiD;AAC7C,IAAA,iBAAiB,CAAC,MAAM,CAAC,UAAD,CAAP,EAAqB,QAArB,CAAjB;AACH,GAtDkC,CAwDnC;;;AACA,EAAA,QAAQ,GAAG,EAAX;AACA,EAAA,UAAU;;AACV,SAAO,UAAU,IAAI,CAArB,EAAwB,UAAU,EAAlC,EAAsC;AAClC,IAAA,iBAAiB,CAAC,MAAM,CAAC,UAAD,CAAP,EAAqB,QAArB,CAAjB;AACH;;AAED,SAAO,MAAP;AACH,CAhED;;AAmEA,IAAI,iBAAiB,GAAG,UAAU,KAAV,EAAiB,QAAjB,EAA2B;AAC/C,MAAI,GAAJ,CAD+C,CAG/C;AACA;;AACA,OAAK,GAAL,IAAY,QAAZ,EAAsB;AAClB;AACA,QAAI,CAAC,MAAM,CAAC,SAAP,CAAiB,cAAjB,CAAgC,IAAhC,CAAqC,KAAK,CAAC,KAA3C,EAAkD,GAAlD,CAAL,EAA6D;AACzD,MAAA,KAAK,CAAC,KAAN,CAAY,GAAZ,IAAmB,QAAQ,CAAC,GAAD,CAA3B;AACH;AACJ,GAV8C,CAY/C;;;AACA,OAAK,GAAL,IAAY,KAAK,CAAC,KAAlB,EAAyB;AACrB,IAAA,QAAQ,CAAC,GAAD,CAAR,GAAgB,KAAK,CAAC,KAAN,CAAY,GAAZ,CAAhB;AACH;AACJ,CAhBD;;AAmBA,IAAI,iBAAiB,GAAG,IAAxB;;AACO,MAAM,yBAAyB,GAAG,MAAM;AAC3C,MAAI,gBAAgB,GAAG;AAAE,IAAA,IAAI,EAAE,IAAR;AAAc,IAAA,UAAU,EAAE,KAA1B;AAAiC,IAAA,SAAS,EAAE;AAA5C,GAAvB,CAD2C,CAE3C;;AACA,EAAA,iBAAiB,GAAG,IAAI,oBAAJ,CAAyB,CAAC,OAAD,EAAU,QAAV,KAAuB;AAChE;AACA,IAAA,OAAO,CAAC,OAAR,CAAgB,KAAK,IAAI;AACrB,UAAI,IAAI,GAAG,KAAK,CAAC,MAAjB;AACA,UAAI,OAAO,GAAG,IAAI,CAAC,YAAL,CAAkB,2BAAlB,CAAd;AAEA,UAAI,kBAAkB,GAAG,YAAY,CAAC,QAAb,CAAsB,MAAtB,CAA6B,CAAC,IAAI,CAAC,CAAC,EAAF,IAAQ,OAA1C,EAAmD,CAAnD,CAAzB;AAEA,UAAI,WAAW,GAAG,KAAlB;AACA,UAAI,KAAK,GAAG,KAAK,CAAC,iBAAlB;AACA,MAAA,kBAAkB,CAAC,KAAnB,GAA2B,KAA3B;AACA,MAAA,IAAI,CAAC,YAAL,CAAkB,YAAlB,EAAgC,KAAhC;;AAEA,UAAI,KAAK,GAAG,CAAZ,EAAe;AACX,QAAA,WAAW,GAAG,IAAd;AACA,QAAA,YAAY,CAAC,WAAb;AACH;;AAED,UAAI,KAAK,IAAI,CAAT,IAAc,WAAlB,EAA+B;AAC3B,QAAA,YAAY,CAAC,WAAb;;AAEA,YAAI,CAAC,kBAAkB,CAAC,MAAxB,EAAgC;AAC5B,UAAA,QAAQ,CAAC,SAAT,CAAmB,IAAnB;AAEA,cAAI,QAAQ,GAAG,YAAY,CAAC,QAAb,CAAsB,SAAtB,CAAgC,CAAC,IAAI,CAAC,CAAC,EAAF,IAAQ,OAA7C,CAAf;AACA,UAAA,YAAY,CAAC,QAAb,CAAsB,MAAtB,CAA6B,QAA7B,EAAuC,CAAvC;AACH;AACJ;AACJ,KA1BD;AA2BH,GA7BmB,EA6BjB,gBA7BiB,CAApB;AA8BH,CAjCM;;;;AAmCA,MAAM,0BAA0B,GAAG,MAAM;AAC5C,MAAI,YAAY,CAAC,QAAb,CAAsB,MAAtB,GAA+B,CAAnC,EAAsC;AAClC,QAAI,uBAAuB,GAAG,YAAY,CAAC,QAAb,CAAsB,MAAtB,CAA6B,IAAI,IAAI,CAAC,IAAI,CAAC,gBAA3C,CAA9B;AACA,IAAA,uBAAuB,CAAC,OAAxB,CAAgC,IAAI,IAAI;AACpC,MAAA,iBAAiB,CAAC,OAAlB,CAA0B,IAAI,CAAC,UAA/B;AACA,MAAA,IAAI,CAAC,gBAAL,GAAwB,IAAxB;AACH,KAHD;AAIH;AACJ,CARM;;;;AAUA,MAAM,qBAAqB,GAAG,MAAM;AACvC,EAAA,iBAAiB,CAAC,UAAlB;AACH,CAFM;;;;AAIP,MAAM,mBAAmB,GAAG,MAAM;AAC9B,MAAI,mBAAmB,GAAG,CAAC,GAAG,YAAY,CAAC,QAAjB,EAA2B,GAAG,YAAY,CAAC,mBAA3C,CAA1B;AAEA,EAAA,mBAAmB,CAAC,OAApB,CAA4B,GAAG,IAAI;AAC/B,IAAA,GAAG,CAAC,UAAJ,CAAe,eAAf,CAA+B,2BAA/B;AACH,GAFD;AAGH,CAND;;AAQO,MAAM,iBAAiB,GAAG,MAAM;AACnC,EAAA,mBAAmB;AAEnB,EAAA,YAAY,CAAC,WAAb,GAA2B,CAA3B;AACA,EAAA,YAAY,CAAC,QAAb,GAAwB,EAAxB;AACA,EAAA,YAAY,CAAC,mBAAb,GAAmC,EAAnC;AACH,CANM;;;;;;;;;;;AC9NA,MAAM,gBAAgB,GAAG,iBAAzB;;;;;;;;;;;ACAA,MAAM,UAAU,GAAG,CAAC,IAAD,EAAO,IAAP,EAAa,YAAb,KAA8B;AACpD,MAAI,GAAG,GAAG,YAAV;;AACA,MAAI,IAAI,CAAC,YAAL,CAAkB,IAAlB,CAAJ,EAA6B;AACzB,QAAI,OAAO,GAAG,IAAI,CAAC,YAAL,CAAkB,IAAlB,CAAd;;AACA,QAAI,OAAO,IAAI,IAAf,EAAqB;AACjB,MAAA,GAAG,GAAG,OAAN;AACH;AACJ;;AACD,SAAO,GAAP;AACH,CATM;;;;AAWA,MAAM,SAAS,GAAG,CAAC,IAAD,EAAO,IAAP,EAAa,YAAb,KAA8B;AACnD,MAAI,GAAG,GAAG,UAAU,CAAC,IAAD,EAAO,IAAP,EAAa,YAAb,CAApB;AACA,MAAI,GAAG,GAAG,QAAQ,CAAC,GAAD,CAAlB;AACA,SAAO,MAAM,CAAC,KAAP,CAAa,GAAb,IAAoB,YAApB,GAAmC,GAA1C;AACH,CAJM;;;;AAMA,MAAM,QAAQ,GAAG,MAAM;AAC1B,MAAI,aAAa,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAApB;AACA,EAAA,aAAa,CAAC,EAAd,GAAmB,oBAAnB;AAEA,MAAI,CAAC,GAAG,QAAQ,CAAC,eAAT,CAAyB,YAAjC;;AACA,OAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,CAApB,EAAuB,CAAC,IAAI,GAA5B,EAAiC;AAC7B,QAAI,GAAG,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAV;AACA,IAAA,GAAG,CAAC,SAAJ,GAAgB,SAAhB;AACA,IAAA,GAAG,CAAC,SAAJ,GAAiB,oBAAmB,CAAE,0BAAyB,CAAE,QAAjE;AACA,IAAA,aAAa,CAAC,WAAd,CAA0B,GAA1B;AACH;;AAED,EAAA,QAAQ,CAAC,IAAT,CAAc,WAAd,CAA0B,aAA1B;AACH,CAbM;;;;AAeA,MAAM,UAAU,GAAG,CAAC,IAAD,EAAO,SAAP,KAAqB;AAC3C,EAAA,SAAS,CAAC,OAAV,CAAkB,UAAU,IAAI;AAC5B,IAAA,IAAI,CAAC,SAAL,CAAe,GAAf,CAAmB,UAAnB;AACH,GAFD;AAGH,CAJM;;;;AAMA,MAAM,aAAa,GAAG,CAAC,IAAD,EAAO,SAAP,KAAqB;AAC9C,EAAA,SAAS,CAAC,OAAV,CAAkB,UAAU,IAAI;AAC5B,IAAA,IAAI,CAAC,SAAL,CAAe,MAAf,CAAsB,UAAtB;AACH,GAFD;AAGH,CAJM;;;;AAOA,MAAM,UAAU,GAAG,CAAC,UAAD,EAAa,QAAQ,GAAG,IAAxB,KAAiC;AACvD,MAAI,KAAK,GAAG,MAAM,CAAC,UAAP,CAAkB,UAAlB,CAAZ;;AAEA,MAAI,QAAQ,IAAI,IAAhB,EAAsB;AAClB,WAAO,KAAK,CAAC,OAAb;AACH,GAFD,MAEO;AACH,IAAA,QAAQ,CAAC;AAAE,MAAA,OAAO,EAAE,KAAK,CAAC,OAAjB;AAA0B,MAAA,MAAM,EAAE;AAAlC,KAAD,CAAR;;AAIA,QAAI,aAAa,GAAI,OAAD,IAAa;AAC7B,MAAA,QAAQ,CAAC;AACL,QAAA,OAAO,EAAE,OADJ;AAEL;AACA;AACA,QAAA,MAAM,EAAE,MAAM,KAAK,CAAC,cAAN,CAAqB,OAArB;AAJT,OAAD,CAAR;AAMH,KAPD;;AASA,QAAI,OAAO,GAAI,CAAD,IAAO;AACjB,MAAA,aAAa,CAAC,CAAC,CAAC,OAAH,CAAb;AACH,KAFD,CAdG,CAkBH;;;AACA,IAAA,KAAK,CAAC,WAAN,CAAkB,OAAlB,EAnBG,CAoBH;AAEH;AACJ,CA5BM;;;;;;;;;;;AC7CP,IAAI,gBAAgB,GAAG,IAAvB;;AAEA,CAAC,MAAM;AACH,EAAA,gBAAgB,GAAG,IAAI,gBAAJ,CAAqB,SAAS,IAAI;AACjD,IAAA,WAAW,CAAC,OAAZ,CAAoB,UAAU,IAAI;AAC9B,MAAA,UAAU,CAAC,QAAX,CAAoB,SAApB;AACH,KAFD;AAGH,GAJkB,CAAnB,CADG,CAOH;;AACA,EAAA,gBAAgB,CAAC,OAAjB,CAAyB,QAAzB,EAAmC;AAC/B,IAAA,UAAU,EAAE,KADmB;AAE/B,IAAA,SAAS,EAAE,IAFoB;AAG/B,IAAA,OAAO,EAAE,IAHsB;AAI/B,IAAA,aAAa,EAAE;AAJgB,GAAnC;AAMH,CAdD;;AAgBA,IAAI,WAAW,GAAG,EAAlB,C,CACA;AACA;AACA;AACA;;AAEO,MAAM,mBAAmB,GAAI,UAAD,IAAgB;AAE/C;AACA,MAAI,iBAAiB,GAAG,WAAW,CAAC,IAAZ,CAAiB,CAAC,IAAI,CAAC,CAAC,IAAF,IAAU,UAAU,CAAC,IAA3C,CAAxB;;AAEA,MAAI,CAAC,iBAAL,EAAwB;AACpB,IAAA,WAAW,CAAC,IAAZ,CAAiB,UAAjB,EADoB,CAGpB;AACA;AACA;AACA;AACA;;AACA,IAAA,UAAU,CAAC,QAAX;AACH;AACJ,CAfM;;;;AAiBA,MAAM,sBAAsB,GAAI,IAAD,IAAU;AAC5C,MAAI,KAAK,GAAG,WAAW,CAAC,SAAZ,CAAsB,CAAC,IAAI,CAAC,CAAC,IAAF,IAAU,IAArC,CAAZ;;AACA,MAAG,KAAK,GAAG,CAAC,CAAZ,EAAe;AACX,IAAA,WAAW,CAAC,MAAZ,CAAmB,KAAnB,EAA0B,CAA1B;AACH;;AAED,MAAG,WAAW,CAAC,MAAZ,IAAsB,CAAzB,EAA4B;AACxB,IAAA,oBAAoB;AACvB;AACJ,CATM;;;;AAYA,MAAM,oBAAoB,GAAG,MAAM;AACtC,EAAA,gBAAgB,CAAC,UAAjB;AACH,CAFM;;;;AAIA,MAAM,qBAAqB,GAAG,MAAM;AACvC,EAAA,oBAAoB;AACpB,EAAA,WAAW,GAAG,EAAd;AACH,CAHM;;;;;;;;;;;;ACzDP;;AACA;;AACA;;AAEA,IAAI,YAAY,GAAG,EAAnB;;AAGO,MAAM,eAAe,GAAG,MAAM;AAEjC;AACA;AACA,EAAA,kBAAkB,GAJe,CAOjC;AACA;;AACA,MAAI,2BAAiB,cAArB,EAAqC;AACjC,IAAA,UAAU,CAAC,MAAM,iBAAiB,EAAxB,EAA4B,2BAAiB,kBAA7C,CAAV;AACH;AACJ,CAZM;;;;AAcP,MAAM,iBAAiB,GAAG,MAAM;AAC5B,sCAAoB;AAChB,IAAA,IAAI,EAAE,mBADU;AAEhB,IAAA,QAAQ,EAAG,SAAD,IAAe;AACrB;AACA,MAAA,UAAU,CAAC,MAAM,kBAAkB,EAAzB,EAA6B,EAA7B,CAAV;AACH;AALe,GAApB;AAOH,CARD;;AAUA,IAAI,aAAa,GAAG,CAApB;;AAEA,MAAM,kBAAkB,GAAG,MAAM;AAE7B,MAAI,WAAW,GAAG,QAAQ,CAAC,gBAAT,CAA2B,IAAG,2BAAiB,kBAAmB,GAAlE,CAAlB;AACA,MAAI,QAAQ,GAAG,KAAK,CAAC,IAAN,CAAW,WAAX,EAAwB,MAAxB,CAA+B,IAAI,IAAI,CAAC,IAAI,CAAC,YAAL,CAAkB,aAAlB,CAAxC,CAAf;AAEA,EAAA,QAAQ,CAAC,OAAT,CAAiB,CAAC,IAAD,EAAO,CAAP,KAAa;AAC1B,IAAA,IAAI,CAAC,YAAL,CAAkB,aAAlB,EAAkC,YAAW,EAAE,aAAc,IAAG,CAAE,EAAlE;;AAEA,QAAI,MAAM,GAAG,IAAI,CAAC,YAAL,CAAkB,iBAAlB,KAAwC,2BAAiB,MAAtE;;AACA,QAAI,KAAK,GAAG,wBAAU,IAAV,EAAgB,gBAAhB,EAAkC,2BAAiB,KAAnD,CAAZ;AACA,QAAI;AAAE,MAAA;AAAF,QAAiB,0BAArB;;AACA,QAAI,IAAI,CAAC,YAAL,CAAkB,iBAAlB,CAAJ,EAA0C;AACtC,UAAI,SAAS,GAAG,IAAI,CAAC,YAAL,CAAkB,iBAAlB,CAAhB;;AACA,UAAI,SAAS,IAAI,IAAb,IAAqB,SAAS,CAAC,MAAV,GAAmB,CAA5C,EAA+C;AAC3C,QAAA,UAAU,GAAG,SAAb;AACH;AACJ;;AACD,QAAI,WAAW,GAAG,KAAlB;AAEA,QAAI,oBAAoB,GAAG,yBAAW,IAAX,EAAiB,sBAAjB,EAAyC,EAAzC,CAA3B;AACA,QAAI,eAAe,GAAG,CAAC,2BAAiB,0BAAlB,EAA8C,oBAAoB,CAAC,KAArB,CAA2B,GAA3B,CAA9C,CAAtB;AACA,QAAI,OAAO,GAAG,IAAI,CAAC,YAAL,CAAkB,2BAAiB,kBAAnC,CAAd;;AACA,QAAI,OAAO,CAAC,MAAR,GAAiB,CAArB,EAAwB;AACpB,MAAA,eAAe,CAAC,IAAhB,CAAsB,OAAM,OAAQ,EAApC;AACH;;AACD,IAAA,eAAe,GAAG,eAAe,CAAC,MAAhB,CAAuB,MAAM,IAAI,MAAM,IAAI,EAA3C,CAAlB;AAEA,QAAI,mBAAmB,GAAG,yBAAW,IAAX,EAAiB,qBAAjB,EAAwC,EAAxC,CAA1B;AACA,QAAI,cAAc,GAAG,CAAC,2BAAiB,yBAAlB,EAA6C,mBAAmB,CAAC,KAApB,CAA0B,GAA1B,CAA7C,CAArB;AACA,IAAA,cAAc,GAAG,cAAc,CAAC,MAAf,CAAsB,MAAM,IAAI,MAAM,IAAI,EAA1C,CAAjB;AAEA,QAAI,iBAAiB,GAAG,KAAxB;AACA,QAAI,cAAc,GAAG,EAArB;AACA,QAAI,YAAY,GAAG,yBAAW,IAAX,EAAiB,oBAAjB,EAAuC,IAAvC,CAAnB;;AACA,QAAI,YAAY,IAAI,IAAhB,IAAwB,YAAY,CAAC,MAAb,GAAsB,EAAlD,EAAsD;AAClD,UAAI,YAAY,GAAG,IAAI,CAAC,KAAL,CAAW,YAAX,CAAnB;;AACA,UAAI,KAAK,CAAC,OAAN,CAAc,YAAd,CAAJ,EAAiC;AAC7B,YAAI,YAAY,CAAC,MAAb,GAAsB,CAA1B,EAA6B,cAAc,CAAC,IAAf,CAAoB,GAAG,YAAvB;AAChC;AACJ;;AAED;AACA,QAAI,gBAAgB,GAAG,IAAvB,CArC0B,CAsC1B;;AACA,QAAI,IAAI,CAAC,YAAL,CAAkB,cAAlB,CAAJ,EAAuC;AACnC,UAAI,QAAQ,GAAG,QAAQ,CAAC,gBAAT,CAA0B,IAAI,CAAC,YAAL,CAAkB,cAAlB,CAA1B,CAAf;;AACA,UAAI,QAAQ,CAAC,MAAT,GAAkB,CAAtB,EAAyB;AACrB,QAAA,gBAAgB,GAAG,QAAnB;AACH;AACJ;;AAED,QAAI,oBAAoB,GAAG;AACvB,MAAA,IAAI,EAAE,2BAAiB,IADA;AAEvB,MAAA,UAAU,EAAE,UAFW;AAGvB,MAAA,SAAS,EAAE,2BAAiB;AAHL,KAA3B;AAMA,QAAI,QAAQ,GAAG,IAAI,oBAAJ,CAAyB,CAAC,OAAD,EAAU,SAAV,KAAwB;AAC5D,MAAA,OAAO,CAAC,OAAR,CAAgB,KAAK,IAAI;AACrB,YAAI,KAAK,GAAG,KAAK,CAAC,iBAAlB;AACA,YAAI,YAAY,GAAG,CAAnB;;AAEA,YAAI,KAAK,GAAG,CAAZ,EAAe;AACX,UAAA,WAAW,GAAG,IAAd,CADW,CAGX;;AACA,cAAI,CAAC,iBAAL,EAAwB;AACpB,YAAA,iBAAiB,GAAG,IAApB;AACA,YAAA,cAAc,CAAC,OAAf,CAAuB,IAAI,IAAI;AAC3B,kBAAI,GAAG,GAAG,MAAM,CAAC,IAAP,CAAY,IAAZ,EAAkB,CAAlB,CAAV;AACA,cAAA,IAAI,CAAC,YAAL,CAAkB,GAAlB,EAAuB,IAAI,CAAC,GAAD,CAA3B;AACH,aAHD;AAIH,WAVU,CAYX;;;AACA,UAAA,YAAY,GAAG,UAAU,CAAC,MAAM;AAC5B,wCAAc,IAAd,EAAoB,cAApB;AACA,qCAAW,IAAX,EAAiB,eAAjB;AACH,WAHwB,EAGtB,KAHsB,CAAzB;AAIH;;AAED,YAAI,KAAK,IAAI,CAAT,IAAc,MAAlB,EAA0B;AACtB,UAAA,YAAY,CAAC,YAAD,CAAZ,CADsB,CAGtB;;AACA,sCAAc,IAAd,EAAoB,eAApB;AACA,mCAAW,IAAX,EAAiB,cAAjB;AACH;;AAED,YAAI,KAAK,IAAI,CAAT,IAAc,CAAC,MAAf,IAAyB,WAA7B,EAA0C;AACtC,UAAA,SAAS,CAAC,SAAV,CAAoB,IAApB;;AACA,UAAA,SAAS,CAAC,UAAV;AACH;AACJ,OAnCD;AAoCH,KArCc,EAqCZ,oBArCY,CAAf;;AAwCA,QAAI,QAAQ,CAAC,SAAT,CAAmB,aAAnB,CAAiC,gBAAjC,CAAJ,EAAwD;AACpD;AACA;AACA,MAAA,gBAAgB,CAAC,OAAjB,CAAyB,KAAK,IAAI;AAC9B,QAAA,QAAQ,CAAC,OAAT,CAAiB,KAAjB;AACH,OAFD;AAGH,KAND,MAMO;AACH;AACA,MAAA,QAAQ,CAAC,OAAT,CAAiB,IAAjB;AACH;;AAED,IAAA,YAAY,CAAC,IAAb,CAAkB,QAAlB;AACH,GAxGD;AAyGH,CA9GD;;AAgHA,MAAM,eAAe,GAAG,CAAC,MAAD,EAAS,OAAT,EAAkB,QAAlB,EAA4B,MAA5B,KAAuC;AAC3D,MAAI,cAAc,GAAG;AACjB,IAAA,IAAI,EAAE,IADW;AAEjB,IAAA,UAAU,EAAE,KAFK;AAGjB,IAAA,SAAS,EAAE,CAHM;AAIjB,OAAG;AAJc,GAArB;AAMA,MAAI,QAAQ,GAAG,IAAI,oBAAJ,CAAyB,CAAC,OAAD,EAAU,QAAV,KAAuB;AAC3D,IAAA,OAAO,CAAC,OAAR,CAAgB,KAAK,IAAI;AACrB,MAAA,QAAQ,CAAC,KAAD,CAAR;AAEA,UAAI,KAAK,GAAG,KAAK,CAAC,iBAAlB;;AACA,UAAI,KAAK,IAAI,CAAb,EAAgB;AACZ,YAAI,KAAK,CAAC,EAAV,EAAc,KAAK,CAAC,EAAN;;AACd,YAAI,CAAC,MAAL,EAAa;AACT,UAAA,QAAQ,CAAC,SAAT,CAAmB,KAAK,CAAC,MAAzB;AACA,UAAA,QAAQ,CAAC,UAAT;AACH;AACJ,OAND,MAMO;AACH,YAAI,KAAK,CAAC,GAAV,EAAe,KAAK,CAAC,GAAN;AAClB;AACJ,KAbD;AAcH,GAfc,EAeZ,cAfY,CAAf;;AAiBA,MAAI,OAAO,MAAP,IAAiB,QAAjB,IAA6B,MAAM,CAAC,IAAP,GAAc,MAAd,GAAuB,CAAxD,EAA2D;AACvD,IAAA,QAAQ,CAAC,gBAAT,CAA0B,MAA1B,EAAkC,OAAlC,CAA0C,IAAI,IAAI,QAAQ,CAAC,OAAT,CAAiB,IAAjB,CAAlD;AACH,GAFD,MAEO,IAAI,MAAM,YAAY,OAAtB,EAA+B;AAClC,IAAA,QAAQ,CAAC,OAAT,CAAiB,MAAjB;AACH,GAFM,MAEA,IAAI,QAAQ,CAAC,SAAT,CAAmB,aAAnB,CAAiC,MAAjC,CAAJ,EAA8C;AACjD,IAAA,MAAM,CAAC,OAAP,CAAe,IAAI,IAAI,QAAQ,CAAC,OAAT,CAAiB,IAAjB,CAAvB;AACH,GAFM,MAEA,IAAI,cAAc,CAAC,SAAf,CAAyB,aAAzB,CAAuC,MAAvC,CAAJ,EAAoD;AACvD,KAAC,GAAG,MAAJ,EAAY,OAAZ,CAAoB,IAAI,IAAI,QAAQ,CAAC,OAAT,CAAiB,IAAjB,CAA5B;AACH,GAFM,MAEA;AACH,IAAA,OAAO,CAAC,KAAR,CAAe,oBAAmB,MAAO,aAAzC;AACH;AACJ,CAnCD;;AAqCO,MAAM,mBAAmB,GAAG,CAAC,MAAD,EAAS,OAAT,EAAkB,QAAlB,KAA+B;AAC9D,EAAA,eAAe,CAAC,MAAD,EAAS,OAAT,EAAkB,QAAlB,EAA4B,KAA5B,CAAf;AACH,CAFM;;;;AAIA,MAAM,yBAAyB,GAAG,CAAC,MAAD,EAAS,OAAT,EAAkB,QAAlB,KAA+B;AACpE,EAAA,eAAe,CAAC,MAAD,EAAS,OAAT,EAAkB,QAAlB,EAA4B,IAA5B,CAAf;AACH,CAFM;;;;AAMA,MAAM,gBAAgB,GAAG,MAAM;AAClC,EAAA,YAAY,CAAC,OAAb,CAAqB,CAAC,IAAI;AACtB,IAAA,CAAC,CAAC,UAAF;AACH,GAFD;AAIA,EAAA,YAAY,GAAG,EAAf;AACH,CANM;;;;AAQA,MAAM,cAAc,GAAG,MAAM;AAChC,EAAA,gBAAgB;;AAChB,MAAI,MAAM,GAAG,QAAQ,CAAC,gBAAT,CAA2B,IAAG,2BAAiB,kBAAmB,GAAlE,CAAb;;AACA,EAAA,MAAM,CAAC,OAAP,CAAe,CAAC,IAAD,EAAO,CAAP,KAAa;AACxB,IAAA,IAAI,CAAC,SAAL,CAAe,MAAf,CAAsB,QAAQ,CAAC,0BAA/B;AAEA,QAAI,OAAO,GAAG,IAAI,CAAC,YAAL,CAAkB,2BAAiB,kBAAnC,CAAd;;AACA,QAAI,OAAO,CAAC,MAAR,GAAiB,CAArB,EAAwB;AACpB,MAAA,IAAI,CAAC,SAAL,CAAe,MAAf,CAAuB,OAAM,OAAQ,EAArC;AACH;AACJ,GAPD;AAQH,CAXM;;;;AAaA,MAAM,gBAAgB,GAAG,MAAM;AAClC,EAAA,cAAc;;AACd,MAAI,MAAM,GAAG,QAAQ,CAAC,gBAAT,CAA2B,IAAG,2BAAiB,kBAAmB,GAAlE,CAAb;;AACA,EAAA,MAAM,CAAC,OAAP,CAAe,CAAC,IAAD,EAAO,CAAP,KAAa;AACxB,QAAI;AAAE,MAAA;AAAF,QAAiB,IAArB;AACA,IAAA,KAAK,CAAC,IAAN,CAAW,UAAX,EAAuB,OAAvB,CAA+B,IAAI,IAAI;AACnC,UAAI,IAAI,CAAC,IAAL,CAAU,OAAV,CAAkB,2BAAiB,kBAAnC,IAAyD,CAAC,CAA9D,EAAiE;AAC7D,QAAA,IAAI,CAAC,eAAL,CAAqB,IAAI,CAAC,IAA1B;AACH;AACJ,KAJD;AAKH,GAPD;AAQH,CAXM;;;;AAaA,MAAM,gBAAgB,GAAG,MAAM;AAClC,EAAA,cAAc;AACd,EAAA,kBAAkB;AACrB,CAHM;;;;;;;;;;;;AClOP;;AACA;;AAGA,IAAI,SAAS,GAAG,CAAhB;AACA,IAAI,aAAa,GAAG,CAAC,CAArB;AACA,IAAI,GAAG,GAAG,QAAQ,CAAC,eAAnB;AACA,IAAI,MAAM,GAAG,CAAb,C,CAAgB;;AAET,MAAM,YAAY,GAAG,MAAM;AAE9B,MAAI,MAAM,GAAG,IAAb;AACA,MAAI;AAAE,IAAA;AAAF,MAAU,2BAAd;;AAEA,MAAI,GAAG,IAAI,IAAX,EAAiB;AACb,QAAI,GAAG,GAAG,UAAU,CAAC,GAAD,CAApB;AACA,IAAA,MAAM,GAAG,CAAC,KAAK,CAAC,GAAD,CAAf;AACH;;AAED,MAAI,MAAJ,EAAY;AACP,cAAS,sBAAT,GAAkC;AAC/B,MAAA,UAAU;AACV,MAAA,UAAU,CAAC,MAAM;AACb,QAAA,MAAM,GAAG,qBAAqB,CAAC,sBAAD,CAA9B;AACH,OAFS,EAEP,OAAO,GAFA,CAAV;AAGH,KALA,GAAD;AAMH,GAPD,MAOO;AACF,cAAS,eAAT,GAA2B;AACxB,MAAA,UAAU;AACV,MAAA,MAAM,GAAG,qBAAqB,CAAC,eAAD,CAA9B;AACH,KAHA,GAAD;AAIH;AACJ,CAvBM;;;AAyBP,IAAI,WAAW,GAAG,KAAlB;;AAEO,MAAM,UAAU,GAAG,MAAM;AAC5B,MAAI,oCAAa,WAAb,IAA4B,CAAhC,EAAmC;AAEnC,EAAA,SAAS,GAAG,CAAC,MAAM,CAAC,WAAP,IAAsB,GAAG,CAAC,SAA3B,KAAyC,GAAG,CAAC,SAAJ,IAAiB,CAA1D,CAAZ,CAH4B,CAK5B;AACA;;AACA,MAAI,SAAS,IAAI,aAAb,IAA8B,CAAC,WAAnC,EAAgD;AAChD,EAAA,aAAa,GAAG,SAAhB;AACA,EAAA,QAAQ,CAAC,IAAT,CAAc,YAAd,CAA2B,iBAA3B,EAA8C,SAA9C;AACA,EAAA,WAAW,GAAG,KAAd;;AAEA,MAAI,OAAO,GAAG,oCAAa,QAAb,CAAsB,MAAtB,CAA6B,KAAK,IAAI,KAAK,CAAC,KAAN,GAAc,CAApD,CAAd;;AAEA,EAAA,OAAO,CAAC,OAAR,CAAgB,KAAK,IAAI;AACrB,QAAI,MAAM,GAAG,KAAK,CAAC,SAAnB;AACA,QAAI,IAAI,GAAG,KAAK,CAAC,UAAjB;AACA,QAAI,OAAO,GAAG,IAAI,CAAC,SAAnB,CAHqB,CAKrB;;AACA,QAAI,4BAAkB,IAAlB,IAA0B,UAA9B,EAA0C;AACtC,MAAA,MAAM,CAAC,OAAP,CAAe,CAAC,CAAD,EAAI,CAAJ,KAAU;AACrB,YAAI,MAAM,GAAG,OAAO,GAAG,CAAC,CAAC,MAAzB,CADqB,CAErB;;AACA,QAAA,CAAC,CAAC,SAAF,GAAc,MAAd;AACA,QAAA,IAAI,CAAC,YAAL,CAAmB,WAAU,CAAE,EAA/B,EAAkC,MAAlC;AACH,OALD;AAMH;;AAED,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,MAAM,CAAC,MAAP,GAAgB,CAApC,EAAuC,CAAC,EAAxC,EAA4C;AACxC,UAAI,QAAQ,GAAG,MAAM,CAAC,CAAD,CAArB;AACA,UAAI,QAAQ,GAAG,MAAM,CAAC,CAAC,GAAG,CAAL,CAArB;AAEA,UAAI,UAAU,GAAG,QAAQ,CAAC,SAA1B;AACA,UAAI,UAAU,GAAG,QAAQ,CAAC,SAA1B;AAEA,UAAI,QAAQ,GAAG,SAAS,GAAG,UAA3B;AACA,UAAI,OAAO,GAAG,SAAS,GAAG,UAA1B;;AAEA,UAAI,QAAQ,IAAI,OAAhB,EAAyB;AACrB;AACA,YAAI,aAAa,GAAG,QAAQ,GAAG,QAAH,GAAc,QAA1C;AAEA,QAAA,MAAM,CAAC,IAAP,CAAY,aAAa,CAAC,KAA1B,EAAiC,OAAjC,CAAyC,CAAC,GAAD,EAAM,KAAN,KAAgB;AACrD,cAAI,IAAI,GAAG,aAAa,CAAC,KAAd,CAAoB,GAApB,CAAX;;AACA,cAAI,KAAK,GAAG,kBAAkB,CAAC,IAAI,CAAC,KAAN,CAA9B;;AACA,UAAA,QAAQ,CAAC,IAAD,EAAO,GAAP,EAAY,KAAZ,CAAR;AACH,SAJD;AAKA;AACH;;AAED,UAAI,QAAQ,GAAG,CAAC,SAAS,GAAG,UAAb,KAA4B,UAAU,GAAG,UAAzC,CAAf;AAEA,MAAA,MAAM,CAAC,IAAP,CAAY,QAAQ,CAAC,KAArB,EAA4B,OAA5B,CAAoC,GAAG,IAAI;AACvC,YAAI,iBAAiB,GAAG,kBAAkB,CAAC,QAAQ,CAAC,KAAT,CAAe,GAAf,EAAoB,KAArB,EAA4B,QAAQ,CAAC,KAAT,CAAe,GAAf,EAAoB,KAAhD,EAAuD,QAAvD,CAA1C;;AACA,YAAI,KAAK,GAAG,kBAAkB,CAAC,iBAAD,CAA9B;;AACA,QAAA,QAAQ,CAAC,IAAD,EAAO,GAAP,EAAY,KAAZ,CAAR;AACH,OAJD;AAKH;AACJ,GA7CD;AA8CH,CA5DM;;;;AA8DP,IAAI,kBAAkB,GAAG,CAAC,IAAD,EAAO,IAAP,EAAa,QAAb,KAA0B;AAC/C,MAAI,UAAJ;AACA,MAAI,UAAU,GAAG,IAAI,CAAC,MAAtB,CAF+C,CAI/C;;AACA,MAAI,UAAU,KAAK,IAAI,CAAC,MAAxB,EAAgC;AAC5B,UAAM,iCAAiC,IAAI,CAAC,CAAD,CAArC,GAA2C,SAA3C,GAAuD,IAAI,CAAC,CAAD,CAA3D,GAAiE,GAAvE;AACH,GAP8C,CAS/C;;;AACA,MAAI,YAAY,GAAG,CAAC,IAAI,CAAC,CAAD,CAAL,CAAnB;AAEA,EAAA,UAAU,GAAG,CAAb;;AAEA,SAAO,UAAU,GAAG,UAApB,EAAgC,UAAU,EAA1C,EAA8C;AAC1C;AACA,IAAA,YAAY,CAAC,UAAD,CAAZ,GAA2B,IAAI,CAAC,UAAD,CAAJ,GAAoB,CAAC,IAAI,CAAC,UAAD,CAAJ,GAAmB,IAAI,CAAC,UAAD,CAAxB,IAAwC,QAAvF;AACH;;AAED,SAAO,YAAP;AACH,CApBD;;AAsBA,IAAI,kBAAkB,GAAI,GAAD,IAAS;AAC9B,MAAI,CAAC,GAAG,CAAR;AACA,SAAO,GAAG,CAAC,CAAD,CAAH,CAAO,OAAP,CAAe,SAAf,EAA0B,MAAM;AACnC,WAAO,GAAG,CAAC,CAAC,EAAF,CAAV;AACH,GAFM,CAAP;AAGH,CALD;;AAOA,IAAI,QAAQ,GAAG,CAAC,IAAD,EAAO,GAAP,EAAY,KAAZ,KAAsB;AACjC,MAAI,KAAK,GAAG,IAAI,CAAC,KAAjB,CADiC,CAGjC;;AACA,MAAI,KAAK,GAAG,GAAG,CAAC,KAAJ,CAAU,KAAV,CAAZ;;AACA,MAAI,KAAK,IAAI,IAAb,EAAmB;AACf;AACA,QAAI,KAAK,GAAG,KAAK,CAAC,CAAD,CAAL,CAAS,WAAT,EAAZ;AACA,QAAI,IAAI,GAAG,GAAG,CAAC,OAAJ,CAAY,KAAK,CAAC,CAAD,CAAjB,EAAsB,KAAtB,EAA6B,OAA7B,CAAqC,GAArC,EAA0C,EAA1C,CAAX;AACA,IAAA,KAAK,CAAC,IAAD,CAAL,GAAc,KAAd;AACH,GALD,MAKO;AACH,IAAA,KAAK,CAAC,GAAD,CAAL,GAAa,KAAb;AACH;AACJ,CAbD;;AAgBO,MAAM,cAAc,GAAG,MAAM;AAChC,EAAA,oBAAoB,CAAC,MAAD,CAApB;AACH,CAFM,C,CAIP;;;;;AACO,MAAM,eAAe,GAAG,MAAM;AACjC,EAAA,WAAW,GAAG,IAAd;AACH,CAFM;;;;;;;;;;;ACpJP,MAAM,uBAAuB,GAAG;AAC5B,EAAA,KAAK,EAAE,CADqB;AAE5B,EAAA,kBAAkB,EAAE,gBAFQ;AAG5B,EAAA,0BAA0B,EAAE,WAHA;AAI5B,EAAA,yBAAyB,EAAE,UAJC;AAK5B,EAAA,MAAM,EAAE,KALoB;AAM5B,EAAA,cAAc,EAAE,IANY;AAO5B,EAAA,kBAAkB,EAAE,CAPQ;AAQ5B,EAAA,IAAI,EAAE,IARsB;AAS5B,EAAA,UAAU,EAAE,iBATgB;AAU5B,EAAA,SAAS,EAAE;AAViB,CAAhC;AAaO,IAAI,gBAAgB,GAAG,IAAvB;;;AAEA,MAAM,+BAA+B,GAAI,SAAD,IAAe;AAC1D,6BAAA,gBAAgB,GAAG,EAAE,GAAG,uBAAL;AAA8B,OAAG;AAAjC,GAAnB;AACA,SAAO,gBAAP;AACH,CAHM;;;AAMP,MAAM,wBAAwB,GAAG;AAC7B,EAAA,IAAI,EAAE,UADuB;AAE7B,EAAA,GAAG,EAAE,IAFwB;AAG7B,EAAA,WAAW,EAAE,qBAHgB;AAI7B,EAAA,cAAc,EAAE,IAJa;AAK7B,EAAA,kBAAkB,EAAE,CALS;AAM7B,EAAA,UAAU,EAAE;AANiB,CAAjC;AASO,IAAI,iBAAiB,GAAG,IAAxB;;;AAEA,MAAM,gCAAgC,GAAI,SAAD,IAAe;AAC3D,8BAAA,iBAAiB,GAAG,EAAE,GAAG,wBAAL;AAA+B,OAAG;AAAlC,GAApB;AACA,SAAO,iBAAP;AACH,CAHM",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",
    "import { OverrideDefaultObserverSettings, OverrideDefaultAnimationSettings } from './modules/Settings';\r\nimport { ObserveElementsOnce, ObserveElementsContinuous, KillAllObservers, RestartAnimateIO, DestroyAnimateIO, InitAIObservers } from './modules/ObserverManager';\r\nimport { InitAnimations, KillAnimateInstance, RestartAnimateInstance } from './modules/AnimationManager';\r\n\r\n((window) => {\r\n    let InitObservers = (_settings) => {\r\n\r\n        // override settings passed from initialization\r\n        OverrideDefaultObserverSettings(_settings);\r\n\r\n        // scan for observable elements, attach intersection observer to each\r\n        InitAIObservers();\r\n    }\r\n\r\n    let Animate = (_settings) => {\r\n\r\n        // override settings passed from initialization\r\n        OverrideDefaultAnimationSettings(_settings);\r\n\r\n        // scan for animateable elements, build the state machine, init rendering\r\n        InitAnimations();\r\n    }\r\n\r\n    window.AnimateIO = {\r\n        InitObservers: InitObservers,\r\n        Observe: ObserveElementsContinuous,\r\n        ObserveOnce: ObserveElementsOnce,\r\n        StopObservers: KillAllObservers,\r\n        DestroyObservers: DestroyAnimateIO,\r\n        RestartObservers: RestartAnimateIO,\r\n        Animate: Animate,\r\n        AnimateEnd: KillAnimateInstance,\r\n        AnimateRestart: RestartAnimateInstance\r\n    };\r\n})(window);",
    "import { InitAnimationStateMachine, InitiateAnimationObserver, ObserveStateMachineObjects, ResetStateMachine, StopAnimationObserver, UpdateStateMachine } from './AnimationStateMachine';\r\nimport { DrawGrid, QueryMedia } from './Helpers';\r\nimport { AddMutationListener, ResetMutationObserver } from './Mutations';\r\nimport { InitRenderer, StopRenderLoop } from './Render';\r\nimport { AnimationSettings } from './Settings';\r\n\r\nlet AnimationsInitialized = false;\r\nexport const InitAnimations = () => {\r\n    if (AnimationsInitialized) {\r\n        console.error('AnimateIO.Animate() already initialized. To start a new instance, please stop the current animations instance using:\\nAnimateIO.StopAnimations();')\r\n    }\r\n\r\n    // Check if browser dimensions are correct\r\n    let canInitialize = QueryMedia(AnimationSettings.activeRange);\r\n    if (!canInitialize) {\r\n        console.log(`AnimateIO.Animate() can't initialize since the screen width is outside the range: ${AnimationSettings.activeRange}`);\r\n        return;\r\n    }\r\n\r\n    // Initiate animation observer\r\n    InitiateAnimationObserver();\r\n\r\n    //scan for animateable elements, build the state machine\r\n    InitAnimationStateMachine();\r\n\r\n    // attach an observer to all the elements added to the State Machine\r\n    ObserveStateMachineObjects();\r\n\r\n    // init rendering for all the elements\r\n    InitRenderer();\r\n\r\n    // look for new animateable objects with the signature data-aio-<int>\r\n    // start looking for new elements after an arbitrary delay of 2 seconds\r\n    if (AnimationSettings.trackMutations) {\r\n        setTimeout(() => AddNewElementsToStateMachine(), AnimationSettings.mutationWatchDelay);\r\n    }\r\n\r\n    // show a helper grid and markers for where an animation will start and end\r\n    if (AnimationSettings.gridHelper) {\r\n        setTimeout(() => DrawGrid(), 1000);\r\n    }\r\n\r\n    AnimationsInitialized = true;\r\n\r\n    // Check for browser resolution changes    \r\n    WatchBrowserResize();\r\n}\r\n\r\n\r\nconst AddNewElementsToStateMachine = () => {\r\n    AddMutationListener({\r\n        name: 'animations_listener',\r\n        callback: (mutations) => {\r\n            UpdateStateMachine();\r\n        }\r\n    })\r\n}\r\n\r\n\r\nconst WatchBrowserResize = () => {\r\n    QueryMedia(AnimationSettings.activeRange, (response) => {\r\n        \r\n        if(response.matches) {\r\n            // Start animations if not already initialized\r\n            if(!AnimationsInitialized) {\r\n                if (response.remove != null) {\r\n                    response.remove();\r\n                    console.log(`Restarting AnimateIO.Animate as browser width is inside the acceptable range: ${AnimationSettings.activeRange}px`);\r\n                    InitAnimations();\r\n                }\r\n            }            \r\n        } else {\r\n            // stop the animations if browser window shrinks below defined width\r\n            if(AnimationsInitialized) {\r\n                console.log(`Stopping AnimateIO.Animate as browser width is outside the range: ${AnimationSettings.activeRange}`);\r\n                KillAnimateInstance();\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nexport const KillAnimateInstance = () => {\r\n\r\n    // stop rendering\r\n    StopRenderLoop();\r\n\r\n    // Stop animation intersection observer\r\n    StopAnimationObserver();\r\n\r\n    // disconnect mutation observer\r\n    ResetMutationObserver();\r\n\r\n    // reset state machine & remove state machine id attribute\r\n    ResetStateMachine();\r\n\r\n    AnimationsInitialized = false;\r\n}\r\n\r\nexport const RestartAnimateInstance = () => {\r\n    KillAnimateInstance();\r\n    InitAnimations();\r\n}\r\n\r\n\r\n",
    "import { SMO_ID_ATTR_NAME } from './Constants';\r\nimport { ForceRenderLoop } from './Render';\r\nimport { AnimationSettings } from './Settings';\r\n\r\nexport const StateMachine = {\r\n    activeCount: 0,\r\n    elements: [],\r\n    singleFrameElements: []\r\n}\r\n\r\nexport const InitAnimationStateMachine = () => {\r\n    // filter out data-aio-<int> elements and push them to the StateMachine so that we can track them later\r\n    populateStateMachine((count) => {\r\n        console.log(`${count} animateable elements found`);\r\n    });\r\n}\r\n\r\nexport const UpdateStateMachine = (callback = null) => {\r\n    populateStateMachine((count) => {\r\n        console.log(`${count} new animateable elements found`);\r\n        ObserveStateMachineObjects();\r\n\r\n        // Wait for observers to get attached to new elements\r\n        setTimeout(() => ForceRenderLoop(), 100);\r\n    });\r\n}\r\n\r\n// State Machine Object Template\r\nconst SMOTemplate = {\r\n    id: '',\r\n    domElement: null,\r\n    ratio: 0,\r\n    repeat: true,\r\n    keyframes: [],\r\n    observerAttached: false\r\n}\r\n\r\nlet populateCounter = 0; // use this counter to generate unique ids for elements\r\n\r\nconst populateStateMachine = (done) => {\r\n    let AllElements = document.getElementsByTagName(\"*\");\r\n\r\n    // Filter elements with the signature: data-aio-<int>\r\n    // Example: data-aio-1000, data-aio-0\r\n    let AIOElements = [...AllElements].filter(elem => {\r\n        let attributes = Object.entries(elem.attributes).map(a => a[1])\r\n        return attributes.some(f => (/^data-aio--?[0-9]+/g).test(f.name));\r\n    });\r\n\r\n    // remove elements which have already been added & tracked inside animation state machien list\r\n    let _elements = AIOElements.filter(elem => !elem.hasAttribute(SMO_ID_ATTR_NAME));\r\n\r\n    _elements.forEach((elem, i) => {\r\n        let { attributes } = elem;\r\n\r\n        let keyframes = Array.from(attributes).filter(attr => (/^data-aio--?[0-9]+/g).test(attr.name));\r\n\r\n        let id = `aio-pl-${++populateCounter}-${i}`;\r\n        elem.setAttribute(SMO_ID_ATTR_NAME, id);\r\n\r\n        let entry = { ...SMOTemplate };\r\n        entry.id = id;\r\n        entry.repeat = elem.hasAttribute('data-aio-repeat');\r\n        entry.domElement = elem;\r\n        entry.keyframes = processKeyFrames(keyframes, elem);\r\n        entry.observerAttached = false;\r\n\r\n        if (keyframes.length == 1) {\r\n            StateMachine.singleFrameElements.push(entry);\r\n        } else {\r\n            StateMachine.elements.push(entry);\r\n        }\r\n    });\r\n    \r\n    done(_elements.length);\r\n}\r\n\r\n\r\nconst processKeyFrames = (kf, elem) => {\r\n    let frames = [];\r\n    kf.forEach((f, i) => {\r\n        let _props = {}\r\n\r\n        f.value.trim().split(\";\").forEach(p => {\r\n            if (p.length > 0) {\r\n                let key = p.split(\":\")[0].trim();\r\n                let val = p.split(\":\")[1].trim();\r\n\r\n                let numbers = [];\r\n                //Now parse ANY number inside this string and create a format string.\r\n                val = val.replace(/[\\-+]?[\\d]*\\.?[\\d]+/g, (n) => {\r\n                    numbers.push(+n);\r\n                    return '{?}';\r\n                });\r\n\r\n                //Add the formatstring as first value.\r\n                numbers.unshift(val);\r\n\r\n                _props[key] = {\r\n                    value: numbers\r\n                }\r\n            }\r\n        });\r\n\r\n        let _offset = parseInt(f.name.replace('data-aio-', ''));\r\n        frames.push({\r\n            offset: _offset,\r\n            absOffset: _offset,\r\n            props: _props\r\n        })\r\n\r\n        elem.setAttribute(`data-kf-${i}`, _offset);\r\n    });\r\n\r\n    //convert offset to absolute\r\n    if (AnimationSettings.mode == \"relative\") {\r\n        frames.forEach((f, i) => {\r\n            let offset = elem.offsetTop + f.offset - window.innerHeight;\r\n            f.absOffset = offset;\r\n            elem.setAttribute(`data-kf-${i}`, offset);\r\n        })\r\n    }\r\n\r\n    frames.sort((a, b) => a.absOffset > b.absOffset ? 1 : b.absOffset > a.absOffset ? -1 : 0);\r\n\r\n    // handle missing props between frames\r\n    let frameIndex = 0;\r\n    let propList = {};\r\n\r\n    //iterate from left to right\r\n    for (; frameIndex < frames.length; frameIndex++) {\r\n        _fillPropForFrame(frames[frameIndex], propList);\r\n    }\r\n\r\n    //iterate from right to left\r\n    propList = {};\r\n    frameIndex--;\r\n    for (; frameIndex >= 0; frameIndex--) {\r\n        _fillPropForFrame(frames[frameIndex], propList);\r\n    }\r\n\r\n    return frames;\r\n}\r\n\r\n\r\nlet _fillPropForFrame = function (frame, propList) {\r\n    var key;\r\n\r\n    //For each key frame iterate over all right hand properties and assign them,\r\n    //but only if the current key frame doesn't have the property by itself\r\n    for (key in propList) {\r\n        //The current frame misses this property, so assign it.\r\n        if (!Object.prototype.hasOwnProperty.call(frame.props, key)) {\r\n            frame.props[key] = propList[key];\r\n        }\r\n    }\r\n\r\n    //Iterate over all props of the current frame and collect them\r\n    for (key in frame.props) {\r\n        propList[key] = frame.props[key];\r\n    }\r\n}\r\n\r\n\r\nlet AnimationObserver = null;\r\nexport const InitiateAnimationObserver = () => {\r\n    let observerSettings = { root: null, rootMargin: '0px', threshold: 0 }\r\n    // init observer\r\n    AnimationObserver = new IntersectionObserver((entries, observer) => {\r\n        //console.log(entries)\r\n        entries.forEach(entry => {\r\n            let elem = entry.target;\r\n            let aioPlId = elem.getAttribute(SMO_ID_ATTR_NAME);\r\n\r\n            let stateMachineObject = StateMachine.elements.filter(o => o.id == aioPlId)[0];\r\n\r\n            let intersected = false;\r\n            let ratio = entry.intersectionRatio;\r\n            stateMachineObject.ratio = ratio;\r\n            elem.setAttribute('data-ratio', ratio);\r\n\r\n            if (ratio > 0) {\r\n                intersected = true;\r\n                StateMachine.activeCount++;\r\n            }\r\n\r\n            if (ratio == 0 && intersected) {\r\n                StateMachine.activeCount--;\r\n\r\n                if (!stateMachineObject.repeat) {\r\n                    observer.unobserve(elem);\r\n\r\n                    let smoIndex = StateMachine.elements.findIndex(o => o.id == aioPlId);\r\n                    StateMachine.elements.splice(smoIndex, 1);\r\n                }\r\n            }\r\n        })\r\n    }, observerSettings);\r\n}\r\n\r\nexport const ObserveStateMachineObjects = () => {\r\n    if (StateMachine.elements.length > 0) {\r\n        let newStateMachineElements = StateMachine.elements.filter(elem => !elem.observerAttached);\r\n        newStateMachineElements.forEach(elem => {\r\n            AnimationObserver.observe(elem.domElement);\r\n            elem.observerAttached = true;\r\n        });\r\n    }\r\n}\r\n\r\nexport const StopAnimationObserver = () => {\r\n    AnimationObserver.disconnect();\r\n}\r\n\r\nconst RemoveSMOAttributes = () => {\r\n    let StateMachineObjects = [...StateMachine.elements, ...StateMachine.singleFrameElements];\r\n\r\n    StateMachineObjects.forEach(smo => {\r\n        smo.domElement.removeAttribute(SMO_ID_ATTR_NAME);\r\n    })\r\n}\r\n\r\nexport const ResetStateMachine = () => {\r\n    RemoveSMOAttributes();\r\n\r\n    StateMachine.activeCount = 0;\r\n    StateMachine.elements = [];\r\n    StateMachine.singleFrameElements = [];\r\n}\r\n\r\n",
    "export const SMO_ID_ATTR_NAME = 'data-aio-smo-id';",
    "export const GetAttrVal = (elem, attr, defaultValue) => {\r\n    let val = defaultValue;\r\n    if (elem.hasAttribute(attr)) {\r\n        let attrval = elem.getAttribute(attr);\r\n        if (attrval != null) {\r\n            val = attrval;\r\n        }\r\n    }\r\n    return val;\r\n}\r\n\r\nexport const AttrToNum = (elem, attr, defaultValue) => {\r\n    let val = GetAttrVal(elem, attr, defaultValue);\r\n    let num = parseInt(val);\r\n    return Number.isNaN(num) ? defaultValue : num;\r\n}\r\n\r\nexport const DrawGrid = () => {\r\n    let gridContainer = document.createElement('div');\r\n    gridContainer.id = \"aio-grid-container\";\r\n\r\n    let h = document.documentElement.scrollHeight;\r\n    for (let i = 0; i < h; i += 100) {\r\n        let div = document.createElement('div');\r\n        div.className = \"aio-row\";\r\n        div.innerHTML = `<div class=\"num\">${i}</div><div class=\"num\">${i}</div>`;\r\n        gridContainer.appendChild(div);\r\n    }\r\n\r\n    document.body.appendChild(gridContainer);\r\n}\r\n\r\nexport const AddClasses = (elem, classList) => {\r\n    classList.forEach(_className => {\r\n        elem.classList.add(_className);\r\n    });\r\n}\r\n\r\nexport const RemoveClasses = (elem, classList) => {\r\n    classList.forEach(_className => {\r\n        elem.classList.remove(_className);\r\n    });\r\n}\r\n\r\n\r\nexport const QueryMedia = (mediaQuery, callback = null) => {\r\n    let query = window.matchMedia(mediaQuery);\r\n\r\n    if (callback == null) {\r\n        return query.matches;\r\n    } else {\r\n        callback({ matches: query.matches, remove: null });\r\n\r\n\r\n\r\n        let ObserveResult = (matches) => {\r\n            callback({\r\n                matches: matches,\r\n                // use removeListener to support legacy browsers like 11 \r\n                //remove: () => query.removeEventListener('change', handler)\r\n                remove: () => query.removeListener(handler) \r\n            });\r\n        }\r\n\r\n        let handler = (e) => {\r\n            ObserveResult(e.matches)\r\n        }\r\n\r\n        // use addListener to support legacy browsers like 11\r\n        query.addListener(handler);\r\n        //query.addEventListener('change', handler);\r\n\r\n    }\r\n}",
    "let mutationObserver = null;\r\n\r\n(() => {\r\n    mutationObserver = new MutationObserver(mutations => {\r\n        subscribers.forEach(subscriber => {\r\n            subscriber.callback(mutations);\r\n        })\r\n    });\r\n\r\n    //https://developer.mozilla.org/en-US/docs/Web/API/MutationObserverInit\r\n    mutationObserver.observe(document, {\r\n        attributes: false,\r\n        childList: true,\r\n        subtree: true,\r\n        characterData: true\r\n    });\r\n})();\r\n\r\nlet subscribers = [];\r\n// {\r\n//     name: \"\",\r\n//     callback: method\r\n// };\r\n\r\nexport const AddMutationListener = (subscriber) => {\r\n\r\n    // check if already subscribed\r\n    let alreadySubscribed = subscribers.some(s => s.name == subscriber.name)\r\n\r\n    if (!alreadySubscribed) {\r\n        subscribers.push(subscriber);\r\n\r\n        // Let's say AnimateIO is initialized at T0 and finds zero elements\r\n        // Then we add a mutation listener after arbitrary delay of 1000ms\r\n        // It's definitely possible that some mutations might have taken place in this time\r\n        // And the elements added in this time didn't get registered\r\n        // To overcome this issue we will manually execute subscriber callback once\r\n        subscriber.callback();\r\n    }\r\n}\r\n\r\nexport const RemoveMutationListener = (name) => {\r\n    let index = subscribers.findIndex(s => s.name == name);\r\n    if(index > -1) {\r\n        subscribers.splice(index, 1);\r\n    }\r\n\r\n    if(subscribers.length == 0) {\r\n        StopMutationObserver();\r\n    }\r\n}\r\n\r\n\r\nexport const StopMutationObserver = () => {\r\n    mutationObserver.disconnect();\r\n}\r\n\r\nexport const ResetMutationObserver = () => {\r\n    StopMutationObserver();\r\n    subscribers = [];\r\n}",
    "import { ObserverSettings } from './Settings';\r\nimport { AddClasses, AttrToNum, GetAttrVal, RemoveClasses } from './Helpers';\r\nimport { AddMutationListener } from './Mutations';\r\n\r\nlet ObserverList = [];\r\n\r\n\r\nexport const InitAIObservers = () => {\r\n\r\n    // Scan for all AIO Elements & create observer for all of them\r\n    // Multiple observers so we can individually disconnect any element that we want\r\n    ObserveAIOElements();\r\n\r\n\r\n    // look for new observable objects \r\n    // delay observing newly added elements for whatever reasons after a delay of X milliseconds\r\n    if (ObserverSettings.trackMutations) {\r\n        setTimeout(() => AddNewAIOElements(), ObserverSettings.mutationWatchDelay);\r\n    }\r\n}\r\n\r\nconst AddNewAIOElements = () => {\r\n    AddMutationListener({\r\n        name: 'observer_listener',\r\n        callback: (mutations) => {\r\n            // attach observers after a light delay\r\n            setTimeout(() => ObserveAIOElements(), 10);\r\n        }\r\n    })\r\n}\r\n\r\nlet helperCounter = 0;\r\n\r\nconst ObserveAIOElements = () => {\r\n\r\n    let AIOElements = document.querySelectorAll(`[${ObserverSettings.observableAttrName}]`);\r\n    let elements = Array.from(AIOElements).filter(elem => !elem.hasAttribute('data-aio-id'));\r\n\r\n    elements.forEach((elem, i) => {\r\n        elem.setAttribute('data-aio-id', `aio_auto_${++helperCounter}_${i}`);\r\n\r\n        let repeat = elem.hasAttribute('data-aio-repeat') || ObserverSettings.repeat;\r\n        let delay = AttrToNum(elem, 'data-aio-delay', ObserverSettings.delay);\r\n        let { rootMargin } = ObserverSettings;\r\n        if (elem.hasAttribute('data-aio-offset')) {\r\n            let offsetVal = elem.getAttribute('data-aio-offset');\r\n            if (offsetVal != null && offsetVal.length > 0) {\r\n                rootMargin = offsetVal;\r\n            }\r\n        }\r\n        let intersected = false;\r\n\r\n        let custom_entry_attrVal = GetAttrVal(elem, 'data-aio-enter-class', '');\r\n        let entry_classlist = [ObserverSettings.enterIntersectionClassName, custom_entry_attrVal.split(' ')];\r\n        let aioType = elem.getAttribute(ObserverSettings.observableAttrName);\r\n        if (aioType.length > 0) {\r\n            entry_classlist.push(`aio-${aioType}`);\r\n        }\r\n        entry_classlist = entry_classlist.filter(_class => _class != '');\r\n\r\n        let custom_exit_attrVal = GetAttrVal(elem, 'data-aio-exit-class', '');\r\n        let exit_classlist = [ObserverSettings.exitIntersectionClassName, custom_exit_attrVal.split(' ')];\r\n        exit_classlist = exit_classlist.filter(_class => _class != '');\r\n\r\n        let attributesApplied = false;\r\n        let lazy_attr_list = [];\r\n        let lazy_attrVal = GetAttrVal(elem, 'data-aio-lazy-attr', null);\r\n        if (lazy_attrVal != null && lazy_attrVal.length > 10) {\r\n            let parsed_array = JSON.parse(lazy_attrVal);\r\n            if (Array.isArray(parsed_array)) {\r\n                if (parsed_array.length > 0) lazy_attr_list.push(...parsed_array);\r\n            }\r\n        }\r\n\r\n        debugger;\r\n        let elementToObserve = elem;\r\n        // watch self or another element(s)\r\n        if (elem.hasAttribute('data-aio-ref')) {\r\n            let refElems = document.querySelectorAll(elem.getAttribute('data-aio-ref'));\r\n            if (refElems.length > 0) {\r\n                elementToObserve = refElems;\r\n            }\r\n        }\r\n\r\n        let intersectionsettings = {\r\n            root: ObserverSettings.root,\r\n            rootMargin: rootMargin,\r\n            threshold: ObserverSettings.threshold\r\n        }\r\n\r\n        let Observer = new IntersectionObserver((entries, _observer) => {\r\n            entries.forEach(entry => {\r\n                let ratio = entry.intersectionRatio;\r\n                let entryTimeOut = 0;\r\n\r\n                if (ratio > 0) {\r\n                    intersected = true;\r\n\r\n                    // add custom attributes\r\n                    if (!attributesApplied) {\r\n                        attributesApplied = true;\r\n                        lazy_attr_list.forEach(attr => {\r\n                            let key = Object.keys(attr)[0];\r\n                            elem.setAttribute(key, attr[key]);\r\n                        });\r\n                    }\r\n\r\n                    // add entry class names & remove exit class names\r\n                    entryTimeOut = setTimeout(() => {\r\n                        RemoveClasses(elem, exit_classlist);\r\n                        AddClasses(elem, entry_classlist);\r\n                    }, delay);\r\n                }\r\n\r\n                if (ratio == 0 && repeat) {\r\n                    clearTimeout(entryTimeOut);\r\n\r\n                    // add exit class names & remove entry class names\r\n                    RemoveClasses(elem, entry_classlist);\r\n                    AddClasses(elem, exit_classlist);\r\n                }\r\n\r\n                if (ratio == 0 && !repeat && intersected) {\r\n                    _observer.unobserve(elem);\r\n                    _observer.disconnect();\r\n                }\r\n            })\r\n        }, intersectionsettings);\r\n\r\n\r\n        if (NodeList.prototype.isPrototypeOf(elementToObserve)) {\r\n            // watch multiple objects\r\n            debugger;\r\n            elementToObserve.forEach(_elem => {                \r\n                Observer.observe(_elem);\r\n            })\r\n        } else {\r\n            // watch self\r\n            Observer.observe(elem);\r\n        }\r\n\r\n        ObserverList.push(Observer);\r\n    });\r\n}\r\n\r\nconst ObserveElements = (target, options, callback, repeat) => {\r\n    let defaultOptions = {\r\n        root: null,\r\n        rootMargin: '0px',\r\n        threshold: 0,\r\n        ...options\r\n    }\r\n    let observer = new IntersectionObserver((entries, observer) => {\r\n        entries.forEach(entry => {\r\n            callback(entry);\r\n\r\n            let ratio = entry.intersectionRatio;\r\n            if (ratio != 0) {\r\n                if (entry.in) entry.in();\r\n                if (!repeat) {\r\n                    observer.unobserve(entry.target);\r\n                    observer.disconnect();\r\n                }\r\n            } else {\r\n                if (entry.out) entry.out();\r\n            }\r\n        })\r\n    }, defaultOptions);\r\n\r\n    if (typeof target == 'string' && target.trim().length > 0) {\r\n        document.querySelectorAll(target).forEach(elem => observer.observe(elem));\r\n    } else if (target instanceof Element) {\r\n        observer.observe(target);\r\n    } else if (NodeList.prototype.isPrototypeOf(target)) {\r\n        target.forEach(elem => observer.observe(elem));\r\n    } else if (HTMLCollection.prototype.isPrototypeOf(target)) {\r\n        [...target].forEach(elem => observer.observe(elem));\r\n    } else {\r\n        console.error(`Target element: '${target}' not found`);\r\n    }\r\n}\r\n\r\nexport const ObserveElementsOnce = (target, options, callback) => {\r\n    ObserveElements(target, options, callback, false);\r\n}\r\n\r\nexport const ObserveElementsContinuous = (target, options, callback) => {\r\n    ObserveElements(target, options, callback, true);\r\n}\r\n\r\n\r\n\r\nexport const KillAllObservers = () => {\r\n    ObserverList.forEach(o => {\r\n        o.disconnect();\r\n    });\r\n\r\n    ObserverList = [];\r\n}\r\n\r\nexport const ResetAnimateIO = () => {\r\n    KillAllObservers();\r\n    let _elems = document.querySelectorAll(`[${ObserverSettings.observableAttrName}]`);\r\n    _elems.forEach((elem, i) => {\r\n        elem.classList.remove(Settings.enterIntersectionClassName);\r\n\r\n        let aioType = elem.getAttribute(ObserverSettings.observableAttrName);\r\n        if (aioType.length > 0) {\r\n            elem.classList.remove(`aio-${aioType}`);\r\n        }\r\n    });\r\n}\r\n\r\nexport const DestroyAnimateIO = () => {\r\n    ResetAnimateIO();\r\n    let _elems = document.querySelectorAll(`[${ObserverSettings.observableAttrName}]`);\r\n    _elems.forEach((elem, i) => {\r\n        let { attributes } = elem;\r\n        Array.from(attributes).forEach(attr => {\r\n            if (attr.name.indexOf(ObserverSettings.observableAttrName) > -1) {\r\n                elem.removeAttribute(attr.name);\r\n            }\r\n        })\r\n    });\r\n}\r\n\r\nexport const RestartAnimateIO = () => {\r\n    ResetAnimateIO();\r\n    ObserveAIOElements();\r\n}\r\n",
    "import { StateMachine } from './AnimationStateMachine'\r\nimport { AnimationSettings } from './Settings';\r\n\r\n\r\nlet scrollTop = 0;\r\nlet scrollTopPrev = -1;\r\nlet doc = document.documentElement;\r\nlet raf_id = 0; // Request Animate Frame ID\r\n\r\nexport const InitRenderer = () => {\r\n\r\n    let useFps = true;\r\n    let { fps } = AnimationSettings;\r\n\r\n    if (fps != null) {\r\n        let num = parseFloat(fps);\r\n        useFps = !isNaN(num);\r\n    }\r\n\r\n    if (useFps) {\r\n        (function animationTimeoutUpdate() {\r\n            RenderLoop();\r\n            setTimeout(() => {\r\n                raf_id = requestAnimationFrame(animationTimeoutUpdate);\r\n            }, 1000 / fps);\r\n        }());\r\n    } else {\r\n        (function animationUpdate() {\r\n            RenderLoop();\r\n            raf_id = requestAnimationFrame(animationUpdate);\r\n        }());\r\n    }\r\n}\r\n\r\nlet forceRender = false;\r\n\r\nexport const RenderLoop = () => {\r\n    if (StateMachine.activeCount == 0) return;\r\n\r\n    scrollTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\r\n\r\n    // Exit render loop if no scrolling happened in this frame\r\n    // Exception: Continue with the render loop if forceRender flag is true\r\n    if (scrollTop == scrollTopPrev && !forceRender) return;\r\n    scrollTopPrev = scrollTop;\r\n    document.body.setAttribute(\"data-scroll-top\", scrollTop);\r\n    forceRender = false;\r\n\r\n    let entries = StateMachine.elements.filter(entry => entry.ratio > 0);\r\n\r\n    entries.forEach(entry => {\r\n        let frames = entry.keyframes;\r\n        let elem = entry.domElement;\r\n        let elemTop = elem.offsetTop;\r\n\r\n        //convert offset to absolute\r\n        if (AnimationSettings.mode == \"relative\") {\r\n            frames.forEach((f, i) => {\r\n                let offset = elemTop + f.offset;\r\n                //offset -= window.innerHeight;\r\n                f.absOffset = offset;\r\n                elem.setAttribute(`data-kf-${i}`, offset);\r\n            })\r\n        }\r\n\r\n        for (let i = 0; i < frames.length - 1; i++) {\r\n            let curFrame = frames[i];\r\n            let nxtFrame = frames[i + 1];\r\n\r\n            let frame1_top = curFrame.absOffset;\r\n            let frame2_top = nxtFrame.absOffset;\r\n\r\n            let isBefore = scrollTop < frame1_top;\r\n            let isAfter = scrollTop > frame2_top;\r\n\r\n            if (isBefore || isAfter) {\r\n                //console.log(isBefore, isAfter);\r\n                let requiredFrame = isBefore ? curFrame : nxtFrame;\r\n\r\n                Object.keys(requiredFrame.props).forEach((key, index) => {\r\n                    let prop = requiredFrame.props[key];\r\n                    let value = _interpolateString(prop.value);\r\n                    setStyle(elem, key, value);\r\n                })\r\n                return;\r\n            }\r\n\r\n            let progress = (scrollTop - frame1_top) / (frame2_top - frame1_top);\r\n\r\n            Object.keys(curFrame.props).forEach(key => {\r\n                let interpolatedValue = _calcInterpolation(curFrame.props[key].value, nxtFrame.props[key].value, progress);\r\n                let value = _interpolateString(interpolatedValue);\r\n                setStyle(elem, key, value);\r\n            })\r\n        }\r\n    });\r\n}\r\n\r\nlet _calcInterpolation = (val1, val2, progress) => {\r\n    var valueIndex;\r\n    var val1Length = val1.length;\r\n\r\n    //They both need to have the same length\r\n    if (val1Length !== val2.length) {\r\n        throw 'Can\\'t interpolate between \"' + val1[0] + '\" and \"' + val2[0] + '\"';\r\n    }\r\n\r\n    //Add the format string as first element.\r\n    var interpolated = [val1[0]];\r\n\r\n    valueIndex = 1;\r\n\r\n    for (; valueIndex < val1Length; valueIndex++) {\r\n        //That's the line where the two numbers are actually interpolated.\r\n        interpolated[valueIndex] = val1[valueIndex] + ((val2[valueIndex] - val1[valueIndex]) * progress);\r\n    }\r\n\r\n    return interpolated;\r\n};\r\n\r\nlet _interpolateString = (val) => {\r\n    let i = 1;\r\n    return val[0].replace(/\\{\\?\\}/g, () => {\r\n        return val[i++];\r\n    });\r\n};\r\n\r\nlet setStyle = (elem, key, value) => {\r\n    let style = elem.style;\r\n\r\n    // Extract \"-x\", \"-m\" from string \"abc-xyz-mno\" \r\n    let match = key.match(/-./g);\r\n    if (match != null) {\r\n        // convert font-size to fontSize\r\n        let uprCs = match[0].toUpperCase();\r\n        let prop = key.replace(match[0], uprCs).replace('-', '');\r\n        style[prop] = value;   \r\n    } else {\r\n        style[key] = value;     \r\n    }\r\n}\r\n\r\n\r\nexport const StopRenderLoop = () => {\r\n    cancelAnimationFrame(raf_id);\r\n}\r\n\r\n// Force rederloop when new elements are added to statemachine\r\nexport const ForceRenderLoop = () => {\r\n    forceRender = true;\r\n}",
    "const DefaultObserverSettings = {\r\n    delay: 0,\r\n    observableAttrName: \"data-aiobserve\",\r\n    enterIntersectionClassName: \"aio-enter\",\r\n    exitIntersectionClassName: \"aio-exit\",\r\n    repeat: false,\r\n    trackMutations: true,\r\n    mutationWatchDelay: 0,\r\n    root: null,\r\n    rootMargin: '0px 0px 0px 0px',\r\n    threshold: 0\r\n}\r\n\r\nexport let ObserverSettings = null;\r\n\r\nexport const OverrideDefaultObserverSettings = (_settings) => {\r\n    ObserverSettings = { ...DefaultObserverSettings, ..._settings };\r\n    return ObserverSettings;\r\n}\r\n\r\n\r\nconst DefaultAnimationSettings = {\r\n    mode: 'relative',\r\n    fps: null,\r\n    activeRange: '(min-width: 1025px)',\r\n    trackMutations: true,\r\n    mutationWatchDelay: 0,\r\n    gridHelper: false\r\n}\r\n\r\nexport let AnimationSettings = null;\r\n\r\nexport const OverrideDefaultAnimationSettings = (_settings) => {\r\n    AnimationSettings = { ...DefaultAnimationSettings, ..._settings };\r\n    return AnimationSettings;\r\n}"
  ]
}