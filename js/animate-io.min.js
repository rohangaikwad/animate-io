!function e(t,n,r){function i(s,o){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){return i(t[s][1][e]||e)}),u,u.exports,e,t,n,r)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";var r=e("./modules/Settings"),i=e("./modules/ObserverManager"),a=e("./modules/AnimationManager");(e=>{e.AnimateIO={InitObservers:e=>{(0,r.OverrideDefaultObserverSettings)(e),(0,i.InitAIObservers)()},Observe:i.ObserveElementsContinuous,ObserveOnce:i.ObserveElementsOnce,StopObservers:i.KillAllObservers,DestroyObservers:i.DestroyAnimateIO,RestartObservers:i.RestartAnimateIO,Animate:e=>{(0,r.OverrideDefaultAnimationSettings)(e),(0,a.InitAnimations)()},AnimateEnd:a.KillAnimateInstance,AnimateRestart:a.RestartAnimateInstance}})(window)},{"./modules/AnimationManager":2,"./modules/ObserverManager":7,"./modules/Settings":9}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RestartAnimateInstance=n.KillAnimateInstance=n.InitAnimations=void 0;var r=e("./AnimationStateMachine"),i=e("./Helpers"),a=e("./Mutations"),s=e("./Render"),o=e("./Settings");let l=!1;const c=()=>{l&&console.error("AnimateIO.Animate() already initialized. To start a new instance, please stop the current animations instance using:\nAnimateIO.StopAnimations();"),(0,i.QueryMedia)(o.AnimationSettings.activeRange)?((0,r.InitiateAnimationObserver)(),(0,r.InitAnimationStateMachine)(),(0,r.ObserveStateMachineObjects)(),(0,s.InitRenderer)(),o.AnimationSettings.trackMutations&&setTimeout(()=>u(),o.AnimationSettings.mutationWatchDelay),o.AnimationSettings.gridHelper&&setTimeout(()=>(0,i.DrawGrid)(),1e3),l=!0,m()):console.log("AnimateIO.Animate() can't initialize since the screen width is outside the range: "+o.AnimationSettings.activeRange)};n.InitAnimations=c;const u=()=>{(0,a.AddMutationListener)({name:"animations_listener",callback:e=>{(0,r.UpdateStateMachine)()}})},m=()=>{(0,i.QueryMedia)(o.AnimationSettings.activeRange,e=>{e.matches?l||null!=e.remove&&(e.remove(),console.log(`Restarting AnimateIO.Animate as browser width is inside the acceptable range: ${o.AnimationSettings.activeRange}px`),c()):l&&(console.log("Stopping AnimateIO.Animate as browser width is outside the range: "+o.AnimationSettings.activeRange),d())})},d=()=>{(0,s.StopRenderLoop)(),(0,r.StopAnimationObserver)(),(0,a.ResetMutationObserver)(),(0,r.ResetStateMachine)(),l=!1};n.KillAnimateInstance=d;n.RestartAnimateInstance=()=>{d(),c()}},{"./AnimationStateMachine":3,"./Helpers":5,"./Mutations":6,"./Render":8,"./Settings":9}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ResetStateMachine=n.StopAnimationObserver=n.ObserveStateMachineObjects=n.InitiateAnimationObserver=n.UpdateStateMachine=n.InitAnimationStateMachine=n.StateMachine=void 0;var r=e("./Constants"),i=e("./Render"),a=e("./Settings");const s={activeCount:0,elements:[],singleFrameElements:[]};n.StateMachine=s;n.InitAnimationStateMachine=()=>{c(e=>{console.log(e+" animateable elements found")})};n.UpdateStateMachine=(e=null)=>{c(e=>{console.log(e+" new animateable elements found"),v(),setTimeout(()=>(0,i.ForceRenderLoop)(),100)})};const o={id:"",domElement:null,ratio:0,repeat:!0,keyframes:[],observerAttached:!1};let l=0;const c=e=>{let t=[...document.getElementsByTagName("*")].filter(e=>Object.entries(e.attributes).map(e=>e[1]).some(e=>/^data-aio--?[0-9]+/g.test(e.name))).filter(e=>!e.hasAttribute(r.SMO_ID_ATTR_NAME));t.forEach((e,t)=>{let{attributes:n}=e,i=Array.from(n).filter(e=>/^data-aio--?[0-9]+/g.test(e.name)),c=`aio-pl-${++l}-${t}`;e.setAttribute(r.SMO_ID_ATTR_NAME,c);let m={...o},d=a.AnimationSettings.mode;if(e.hasAttribute("data-aio-mode")){let t=e.getAttribute("data-aio-mode");t.length>0&&(d=t)}m.id=c,m.mode=d,m.repeat=e.hasAttribute("data-aio-repeat"),m.domElement=e,m.keyframes=u(i,e,d),m.observerAttached=!1,1==i.length?s.singleFrameElements.push(m):s.elements.push(m)}),e(t.length)},u=(e,t,n)=>{let r=[];e.forEach((e,n)=>{let i={};e.value.trim().split(";").forEach(e=>{if(e.length>0){let t=e.split(":")[0].trim(),n=e.split(":")[1].trim(),r=[];n=n.replace(/[\-+]?[\d]*\.?[\d]+/g,e=>(r.push(+e),"{?}")),r.unshift(n),i[t]={value:r}}});let a=parseInt(e.name.replace("data-aio-",""));r.push({offset:a,absOffset:a,props:i}),t.setAttribute("data-kf-"+n,a)}),"relative"==n&&r.forEach((e,n)=>{let r=t.offsetTop+e.offset-window.innerHeight;e.absOffset=r,t.setAttribute("data-kf-"+n,r)}),r.sort((e,t)=>e.absOffset>t.absOffset?1:t.absOffset>e.absOffset?-1:0);let i=0,a={};for(;i<r.length;i++)m(r[i],a);for(a={},i--;i>=0;i--)m(r[i],a);return r};let m=function(e,t){var n;for(n in t)Object.prototype.hasOwnProperty.call(e.props,n)||(e.props[n]=t[n]);for(n in e.props)t[n]=e.props[n]},d=null;n.InitiateAnimationObserver=()=>{d=new IntersectionObserver((e,t)=>{e.forEach(e=>{let n=e.target,i=n.getAttribute(r.SMO_ID_ATTR_NAME),a=s.elements.filter(e=>e.id==i)[0],o=!1,l=e.intersectionRatio;if(a.ratio=l,n.setAttribute("data-ratio",l),l>0&&(o=!0,s.activeCount++),0==l&&o&&(s.activeCount--,!a.repeat)){t.unobserve(n);let e=s.elements.findIndex(e=>e.id==i);s.elements.splice(e,1)}})},{root:null,rootMargin:"0px",threshold:0})};const v=()=>{if(s.elements.length>0){s.elements.filter(e=>!e.observerAttached).forEach(e=>{d.observe(e.domElement),e.observerAttached=!0})}};n.ObserveStateMachineObjects=v;n.StopAnimationObserver=()=>{d.disconnect()};n.ResetStateMachine=()=>{[...s.elements,...s.singleFrameElements].forEach(e=>{e.domElement.removeAttribute(r.SMO_ID_ATTR_NAME)}),s.activeCount=0,s.elements=[],s.singleFrameElements=[]}},{"./Constants":4,"./Render":8,"./Settings":9}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SMO_ID_ATTR_NAME=void 0;n.SMO_ID_ATTR_NAME="data-aio-smo-id"},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.QueryMedia=n.RemoveClasses=n.AddClasses=n.DrawGrid=n.AttrToNum=n.GetAttrVal=void 0;const r=(e,t,n)=>{let r=n;if(e.hasAttribute(t)){let n=e.getAttribute(t);null!=n&&(r=n)}return r};n.GetAttrVal=r;n.AttrToNum=(e,t,n)=>{let i=r(e,t,n),a=parseInt(i);return Number.isNaN(a)?n:a};n.DrawGrid=()=>{let e=document.createElement("div");e.id="aio-grid-container";let t=document.documentElement.scrollHeight;for(let n=0;n<t;n+=100){let t=document.createElement("div");t.className="aio-row",t.innerHTML=`<div class="num">${n}</div><div class="num">${n}</div>`,e.appendChild(t)}document.body.appendChild(e)};n.AddClasses=(e,t)=>{t.forEach(t=>{e.classList.add(t)})};n.RemoveClasses=(e,t)=>{t.forEach(t=>{e.classList.remove(t)})};n.QueryMedia=(e,t=null)=>{let n=window.matchMedia(e);if(null==t)return n.matches;{t({matches:n.matches,remove:null});let e=e=>{t({matches:e,remove:()=>n.removeListener(r)})},r=t=>{e(t.matches)};n.addListener(r)}}},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ResetMutationObserver=n.StopMutationObserver=n.RemoveMutationListener=n.AddMutationListener=void 0;let r=null;r=new MutationObserver(e=>{i.forEach(t=>{t.callback(e)})}),r.observe(document,{attributes:!1,childList:!0,subtree:!0,characterData:!0});let i=[];n.AddMutationListener=e=>{i.some(t=>t.name==e.name)||(i.push(e),e.callback())};n.RemoveMutationListener=e=>{let t=i.findIndex(t=>t.name==e);t>-1&&i.splice(t,1),0==i.length&&a()};const a=()=>{r.disconnect()};n.StopMutationObserver=a;n.ResetMutationObserver=()=>{a(),i=[]}},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RestartAnimateIO=n.DestroyAnimateIO=n.ResetAnimateIO=n.KillAllObservers=n.ObserveElementsContinuous=n.ObserveElementsOnce=n.InitAIObservers=void 0;var r=e("./Settings"),i=e("./Helpers"),a=e("./Mutations");let s=[];n.InitAIObservers=()=>{c(),r.ObserverSettings.trackMutations&&setTimeout(()=>o(),r.ObserverSettings.mutationWatchDelay)};const o=()=>{(0,a.AddMutationListener)({name:"observer_listener",callback:e=>{setTimeout(()=>c(),10)}})};let l=0;const c=()=>{let e=document.querySelectorAll(`[${r.ObserverSettings.observableAttrName}]`);Array.from(e).filter(e=>!e.hasAttribute("data-aio-id")).forEach((e,t)=>{e.setAttribute("data-aio-id",`aio_auto_${++l}_${t}`);let n=e.hasAttribute("data-aio-repeat")||r.ObserverSettings.repeat,a=(0,i.AttrToNum)(e,"data-aio-delay",r.ObserverSettings.delay),{rootMargin:o}=r.ObserverSettings;if(e.hasAttribute("data-aio-offset")){let t=e.getAttribute("data-aio-offset");null!=t&&t.length>0&&(o=t)}let c=!1,u=(0,i.GetAttrVal)(e,"data-aio-enter-class",""),m=[r.ObserverSettings.enterIntersectionClassName,u.split(" ")],d=e.getAttribute(r.ObserverSettings.observableAttrName);d.length>0&&m.push("aio-"+d),m=m.filter(e=>""!=e);let v=(0,i.GetAttrVal)(e,"data-aio-exit-class",""),b=[r.ObserverSettings.exitIntersectionClassName,v.split(" ")];b=b.filter(e=>""!=e);let f=!1,A=[],p=(0,i.GetAttrVal)(e,"data-aio-lazy-attr",null);if(null!=p&&p.length>10){let e=JSON.parse(p);Array.isArray(e)&&e.length>0&&A.push(...e)}let h=e;if(e.hasAttribute("data-aio-ref")){let t=document.querySelectorAll(e.getAttribute("data-aio-ref"));t.length>0&&(h=t)}let O={root:r.ObserverSettings.root,rootMargin:o,threshold:r.ObserverSettings.threshold},g=new IntersectionObserver((t,r)=>{t.forEach(t=>{let s=t.intersectionRatio,o=0;s>0&&(c=!0,f||(f=!0,A.forEach(t=>{let n=Object.keys(t)[0];e.setAttribute(n,t[n])})),o=setTimeout(()=>{(0,i.RemoveClasses)(e,b),(0,i.AddClasses)(e,m)},a)),0==s&&n&&(clearTimeout(o),(0,i.RemoveClasses)(e,m),(0,i.AddClasses)(e,b)),0==s&&!n&&c&&(r.unobserve(e),r.disconnect())})},O);NodeList.prototype.isPrototypeOf(h)?h.forEach(e=>{g.observe(e)}):g.observe(e),s.push(g)})},u=(e,t,n,r)=>{let i={root:null,rootMargin:"0px",threshold:0,...t},a=new IntersectionObserver((e,t)=>{e.forEach(e=>{n(e),0!=e.intersectionRatio?(e.in&&e.in(),r||(t.unobserve(e.target),t.disconnect())):e.out&&e.out()})},i);"string"==typeof e&&e.trim().length>0?document.querySelectorAll(e).forEach(e=>a.observe(e)):e instanceof Element?a.observe(e):NodeList.prototype.isPrototypeOf(e)?e.forEach(e=>a.observe(e)):HTMLCollection.prototype.isPrototypeOf(e)?[...e].forEach(e=>a.observe(e)):console.error(`Target element: '${e}' not found`)};n.ObserveElementsOnce=(e,t,n)=>{u(e,t,n,!1)};n.ObserveElementsContinuous=(e,t,n)=>{u(e,t,n,!0)};const m=()=>{s.forEach(e=>{e.disconnect()}),s=[]};n.KillAllObservers=m;const d=()=>{m(),document.querySelectorAll(`[${r.ObserverSettings.observableAttrName}]`).forEach((e,t)=>{e.classList.remove(Settings.enterIntersectionClassName);let n=e.getAttribute(r.ObserverSettings.observableAttrName);n.length>0&&e.classList.remove("aio-"+n)})};n.ResetAnimateIO=d;n.DestroyAnimateIO=()=>{d(),document.querySelectorAll(`[${r.ObserverSettings.observableAttrName}]`).forEach((e,t)=>{let{attributes:n}=e;Array.from(n).forEach(t=>{t.name.indexOf(r.ObserverSettings.observableAttrName)>-1&&e.removeAttribute(t.name)})})};n.RestartAnimateIO=()=>{d(),c()}},{"./Helpers":5,"./Mutations":6,"./Settings":9}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ForceRenderLoop=n.StopRenderLoop=n.RenderLoop=n.InitRenderer=void 0;var r=e("./AnimationStateMachine"),i=e("./Settings");let a=0,s=-1,o=document.documentElement,l=0;n.InitRenderer=()=>{let e=!0,{fps:t}=i.AnimationSettings;if(null!=t){let n=parseFloat(t);e=!isNaN(n)}e?function e(){u(),setTimeout(()=>{l=requestAnimationFrame(e)},1e3/t)}():function e(){u(),l=requestAnimationFrame(e)}()};let c=!1;const u=()=>{if(0==r.StateMachine.activeCount)return;if(a=(window.pageYOffset||o.scrollTop)-(o.clientTop||0),a==s&&!c)return;s=a,document.body.setAttribute("data-scroll-top",a),c=!1,r.StateMachine.elements.filter(e=>e.ratio>0).forEach(e=>{let t=e.keyframes,n=e.domElement,r=n.offsetTop;"relative"==e.mode&&t.forEach((e,t)=>{let i=r+e.offset;e.absOffset=i,n.setAttribute("data-kf-"+t,i)});for(let e=0;e<t.length-1;e++){let r=t[e],i=t[e+1],s=r.absOffset,o=i.absOffset,l=a<s,c=a>o;if(l||c){let e=l?r:i;return void Object.keys(e.props).forEach((t,r)=>{let i=e.props[t],a=d(i.value);v(n,t,a)})}let u=(a-s)/(o-s);Object.keys(r.props).forEach(e=>{let t=m(r.props[e].value,i.props[e].value,u),a=d(t);v(n,e,a)})}})};n.RenderLoop=u;let m=(e,t,n)=>{var r,i=e.length;if(i!==t.length)throw"Can't interpolate between \""+e[0]+'" and "'+t[0]+'"';var a=[e[0]];for(r=1;r<i;r++)a[r]=e[r]+(t[r]-e[r])*n;return a},d=e=>{let t=1;return e[0].replace(/\{\?\}/g,()=>e[t++])},v=(e,t,n)=>{let r=e.style,i=t.match(/-./g);if(null!=i){let e=i[0].toUpperCase();r[t.replace(i[0],e).replace("-","")]=n}else r[t]=n};n.StopRenderLoop=()=>{cancelAnimationFrame(l)};n.ForceRenderLoop=()=>{c=!0}},{"./AnimationStateMachine":3,"./Settings":9}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.OverrideDefaultAnimationSettings=n.AnimationSettings=n.OverrideDefaultObserverSettings=n.ObserverSettings=void 0;const r={delay:0,observableAttrName:"data-aiobserve",enterIntersectionClassName:"aio-enter",exitIntersectionClassName:"aio-exit",repeat:!1,trackMutations:!0,mutationWatchDelay:0,root:null,rootMargin:"0px 0px 0px 0px",threshold:0};let i=null;n.ObserverSettings=i;n.OverrideDefaultObserverSettings=e=>(n.ObserverSettings=i={...r,...e},i);const a={mode:"relative",fps:null,activeRange:"(min-width: 1025px)",trackMutations:!0,mutationWatchDelay:0,gridHelper:!1};let s=null;n.AnimationSettings=s;n.OverrideDefaultAnimationSettings=e=>(n.AnimationSettings=s={...a,...e},s)},{}]},{},[1]);
//# sourceMappingURL=animate-io.min.js.map
