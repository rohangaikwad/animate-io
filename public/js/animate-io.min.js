!function e(t,n,r){function i(a,o){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var m=n[a]={exports:{}};t[a][0].call(m.exports,(function(e){return i(t[a][1][e]||e)}),m,m.exports,e,t,n,r)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var r=e("./modules/Settings"),i=e("./modules/Observer"),s=e("./modules/Animations");(e=>{e.AnimateIO={InitObservers:e=>{(0,r.OverrideDefaultObserverSettings)(e),(0,i.InitAIObservers)()},Observe:i.ObserveElementsContinuous,ObserveOnce:i.ObserveElementsOnce,StopObservers:i.KillAllObservers,DestroyObservers:i.DestroyAnimateIO,RestartObservers:i.RestartAnimateIO,Animate:e=>{(0,r.OverrideDefaultAnimationSettings)(e),(0,s.InitAnimations)()},AnimateEnd:s.KillAnimateInstance,AnimateRestart:s.RestartAnimateInstance}})(window)},{"./modules/Animations":3,"./modules/Observer":7,"./modules/Settings":9}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ResetStateMachine=n.StopAnimationObserver=n.ObserveStateMachineObjects=n.InitiateAnimationObserver=n.UpdateStateMachine=n.InitAnimationStateMachine=n.StateMachine=void 0;var r=e("./Constants"),i=e("./Render"),s=e("./Settings");const a={activeCount:0,elements:[],singleFrameElements:[]};n.StateMachine=a;n.InitAnimationStateMachine=()=>{c(e=>{console.log(e+" animateable elements found")})};n.UpdateStateMachine=(e=null)=>{c(e=>{console.log(e+" new animateable elements found"),v(),setTimeout(()=>(0,i.ForceRenderLoop)(),100)})};const o={id:"",domElement:null,ratio:0,repeat:!0,keyframes:[],observerAttached:!1};let l=0;const c=e=>{let t=[...document.getElementsByTagName("*")].filter(e=>Object.entries(e.attributes).map(e=>e[1]).some(e=>/^data-aio--?[0-9]+/g.test(e.name))).filter(e=>!e.hasAttribute(r.SMO_ID_ATTR_NAME));t.forEach((e,t)=>{let{attributes:n}=e,i=Array.from(n).filter(e=>/^data-aio--?[0-9]+/g.test(e.name)),s=`aio-pl-${++l}-${t}`;e.setAttribute(r.SMO_ID_ATTR_NAME,s);let c={...o};c.id=s,c.repeat=e.hasAttribute("data-aio-repeat"),c.domElement=e,c.keyframes=m(i,e),c.observerAttached=!1,1==i.length?a.singleFrameElements.push(c):a.elements.push(c)}),e(t.length)},m=(e,t)=>{let n=[];e.forEach((e,r)=>{let i={};e.value.trim().split(";").forEach(e=>{if(e.length>0){let t=e.split(":")[0].trim(),n=e.split(":")[1].trim(),r=[];n=n.replace(/[\-+]?[\d]*\.?[\d]+/g,e=>(r.push(+e),"{?}")),r.unshift(n),i[t]={value:r}}});let s=parseInt(e.name.replace("data-aio-",""));n.push({offset:s,absOffset:s,props:i}),t.setAttribute("data-kf-"+r,s)}),"relative"==s.AnimationSettings.mode&&n.forEach((e,n)=>{let r=t.offsetTop+e.offset-window.innerHeight;e.absOffset=r,t.setAttribute("data-kf-"+n,r)}),n.sort((e,t)=>e.absOffset>t.absOffset?1:t.absOffset>e.absOffset?-1:0);let r=0,i={};for(;r<n.length;r++)u(n[r],i);for(i={},r--;r>=0;r--)u(n[r],i);return n};let u=function(e,t){var n;for(n in t)Object.prototype.hasOwnProperty.call(e.props,n)||(e.props[n]=t[n]);for(n in e.props)t[n]=e.props[n]},d=null;n.InitiateAnimationObserver=()=>{d=new IntersectionObserver((e,t)=>{e.forEach(e=>{let n=e.target,i=n.getAttribute(r.SMO_ID_ATTR_NAME),s=a.elements.filter(e=>e.id==i)[0],o=!1,l=e.intersectionRatio;if(s.ratio=l,n.setAttribute("data-ratio",l),l>0&&(o=!0,a.activeCount++),0==l&&o&&(a.activeCount--,!s.repeat)){t.unobserve(n);let e=a.elements.findIndex(e=>e.id==i);a.elements.splice(e,1)}})},{root:null,rootMargin:"0px",threshold:0})};const v=()=>{if(a.elements.length>0){a.elements.filter(e=>!e.observerAttached).forEach(e=>{d.observe(e.domElement),e.observerAttached=!0})}};n.ObserveStateMachineObjects=v;n.StopAnimationObserver=()=>{d.disconnect()};n.ResetStateMachine=()=>{[...a.elements,...a.singleFrameElements].forEach(e=>{e.domElement.removeAttribute(r.SMO_ID_ATTR_NAME)}),a.activeCount=0,a.elements=[],a.singleFrameElements=[]}},{"./Constants":4,"./Render":8,"./Settings":9}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RestartAnimateInstance=n.KillAnimateInstance=n.InitAnimations=void 0;var r=e("./AnimationStateMachine"),i=e("./Helpers"),s=e("./Mutations"),a=e("./Render"),o=e("./Settings");let l=!1;const c=()=>{l&&console.error("AnimateIO.Animate() already initialized. To start a new instance, please stop the current animations instance using:\nAnimateIO.StopAnimations();"),(0,i.QueryMedia)(`(min-width: ${o.AnimationSettings.deactivateBelow}px)`)?((0,r.InitiateAnimationObserver)(),(0,r.InitAnimationStateMachine)(),(0,r.ObserveStateMachineObjects)(),(0,a.InitRenderer)(),o.AnimationSettings.trackMutations&&setTimeout(()=>m(),2e3),o.AnimationSettings.gridHelper&&setTimeout(()=>(0,i.DrawGrid)(),1e3),l=!0,u()):console.log("AnimateIO.Animate() can't initialize since the screen width is less than "+o.AnimationSettings.deactivateBelow)};n.InitAnimations=c;const m=()=>{(0,s.AddMutationListener)({name:"animations_listener",callback:e=>{(0,r.UpdateStateMachine)()}})},u=()=>{(0,i.QueryMedia)(`(min-width: ${o.AnimationSettings.deactivateBelow}px)`,e=>{e.matches?l||null!=e.remove&&(e.remove(),console.log(`Restarting AnimateIO.Animate as browser width is >= ${o.AnimationSettings.deactivateBelow}px`),c()):l&&(console.log(`Stopping AnimateIO.Animate as browser width is < ${o.AnimationSettings.deactivateBelow}px`),d())})},d=()=>{(0,a.StopRenderLoop)(),(0,r.StopAnimationObserver)(),(0,s.ResetMutationObserver)(),(0,r.ResetStateMachine)(),l=!1};n.KillAnimateInstance=d;n.RestartAnimateInstance=()=>{d(),c()}},{"./AnimationStateMachine":2,"./Helpers":5,"./Mutations":6,"./Render":8,"./Settings":9}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SMO_ID_ATTR_NAME=void 0;n.SMO_ID_ATTR_NAME="data-aio-smo-id"},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.QueryMedia=n.DrawGrid=n.AttrToNum=n.GetAttrVal=void 0;const r=(e,t,n)=>{let r=n;if(e.hasAttribute(t)){let n=e.getAttribute(t);null!=n&&(r=n)}return r};n.GetAttrVal=r;n.AttrToNum=(e,t,n)=>{let i=r(e,t,n),s=parseInt(i);return Number.isNaN(s)?n:s};n.DrawGrid=()=>{let e=document.createElement("div");e.id="aio-grid-container";let t=document.documentElement.scrollHeight;for(let n=0;n<t;n+=100){let t=document.createElement("div");t.className="aio-row",t.innerHTML=`<div class="num">${n}</div><div class="num">${n}</div>`,e.appendChild(t)}document.body.appendChild(e)};n.QueryMedia=(e,t=null)=>{let n=window.matchMedia(e);if(null==t)return n.matches;{t({matches:n.matches,remove:null});let e=e=>{t({matches:e,remove:()=>n.removeListener(r)})},r=t=>{e(t.matches)};n.addListener(r)}}},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ResetMutationObserver=n.StopMutationObserver=n.RemoveMutationListener=n.AddMutationListener=void 0;let r=null;r=new MutationObserver(e=>{i.forEach(t=>{t.callback(e)})}),r.observe(document,{attributes:!1,childList:!0,subtree:!0,characterData:!0});let i=[];n.AddMutationListener=e=>{i.some(t=>t.name==e.name)||(i.push(e),e.callback())};n.RemoveMutationListener=e=>{let t=i.findIndex(t=>t.name==e);t>-1&&i.splice(t,1),0==i.length&&s()};const s=()=>{r.disconnect()};n.StopMutationObserver=s;n.ResetMutationObserver=()=>{s(),i=[]}},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RestartAnimateIO=n.DestroyAnimateIO=n.ResetAnimateIO=n.KillAllObservers=n.ObserveElementsContinuous=n.ObserveElementsOnce=n.InitAIObservers=void 0;var r=e("./Settings"),i=e("./Helpers"),s=e("./Mutations");let a=[];n.InitAIObservers=()=>{c(),r.ObserverSettings.trackMutations&&setTimeout(()=>o(),2e3)};const o=()=>{(0,s.AddMutationListener)({name:"observer_listener",callback:e=>{setTimeout(()=>c(),10)}})};let l=0;const c=()=>{let e=document.querySelectorAll(`[${r.ObserverSettings.observableAttrName}]`);Array.from(e).filter(e=>!e.hasAttribute("data-aio-id")).forEach((e,t)=>{e.setAttribute("data-aio-id",`aio_auto_${++l}_${t}`);let n=e.hasAttribute("data-aio-repeat")||r.ObserverSettings.repeat,s=(0,i.AttrToNum)(e,"data-aio-delay",r.ObserverSettings.delay),o=`${(0,i.GetAttrVal)(e,"data-aio-offset-top",r.ObserverSettings.rootMargin.split(" ")[0])} ${(0,i.GetAttrVal)(e,"data-aio-offset-right",r.ObserverSettings.rootMargin.split(" ")[1])} ${(0,i.GetAttrVal)(e,"data-aio-offset-bottom",r.ObserverSettings.rootMargin.split(" ")[2])} ${(0,i.GetAttrVal)(e,"data-aio-offset-left",r.ObserverSettings.rootMargin.split(" ")[3])}`;if(e.hasAttribute("data-aio-offset")){let t=e.getAttribute("data-aio-offset");null!=t&&t.length>0&&(o=t)}let c=!1,m=[],u=e.getAttribute(r.ObserverSettings.observableAttrName);u.length>0&&m.push("aio-"+u);let d={root:r.ObserverSettings.root,rootMargin:o,threshold:r.ObserverSettings.threshold};console.log(d);let v=new IntersectionObserver((t,i)=>{t.forEach(t=>{let a=t.intersectionRatio,o=0;a>0&&(c=!0,o=setTimeout(()=>{t.target.classList.remove(r.ObserverSettings.exitIntersectionClassName),t.target.classList.add(r.ObserverSettings.enterIntersectionClassName),m.forEach(e=>{t.target.classList.add(e)})},s)),0==a&&n&&(clearTimeout(o),t.target.classList.remove(r.ObserverSettings.enterIntersectionClassName),m.forEach(e=>{t.target.classList.remove(e)}),t.target.classList.add(r.ObserverSettings.exitIntersectionClassName)),0==a&&!n&&c&&(i.unobserve(e),i.disconnect())})},d);v.observe(e),a.push(v)})},m=(e,t,n,r)=>{let i={root:null,rootMargin:"0px",threshold:0,...t},s=new IntersectionObserver((e,t)=>{e.forEach(e=>{n(e),0!=e.intersectionRatio?(e.in&&e.in(),r||(t.unobserve(e.target),t.disconnect())):e.out&&e.out()})},i);"string"==typeof e&&e.trim().length>0?document.querySelectorAll(e).forEach(e=>s.observe(e)):e instanceof Element?s.observe(e):NodeList.prototype.isPrototypeOf(e)?e.forEach(e=>s.observe(e)):HTMLCollection.prototype.isPrototypeOf(e)?[...e].forEach(e=>s.observe(e)):console.error(`Target element: "${e}" not found`)};n.ObserveElementsOnce=(e,t,n)=>{m(e,t,n,!1)};n.ObserveElementsContinuous=(e,t,n)=>{m(e,t,n,!0)};const u=()=>{a.forEach(e=>{e.disconnect()}),a=[]};n.KillAllObservers=u;const d=()=>{u(),document.querySelectorAll(`[${r.ObserverSettings.observableAttrName}]`).forEach((e,t)=>{e.classList.remove(Settings.enterIntersectionClassName);let n=e.getAttribute(r.ObserverSettings.observableAttrName);n.length>0&&e.classList.remove("aio-"+n)})};n.ResetAnimateIO=d;n.DestroyAnimateIO=()=>{d(),document.querySelectorAll(`[${r.ObserverSettings.observableAttrName}]`).forEach((e,t)=>{let{attributes:n}=e;Array.from(n).forEach(t=>{t.name.indexOf(r.ObserverSettings.observableAttrName)>-1&&e.removeAttribute(t.name)})})};n.RestartAnimateIO=()=>{d(),c()}},{"./Helpers":5,"./Mutations":6,"./Settings":9}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ForceRenderLoop=n.StopRenderLoop=n.RenderLoop=n.InitRenderer=void 0;var r=e("./AnimationStateMachine"),i=e("./Settings");let s=0,a=-1,o=document.documentElement,l=0;n.InitRenderer=()=>{let e=!0,{fps:t}=i.AnimationSettings;if(null!=t){let n=parseFloat(t);e=!isNaN(n)}e?function e(){m(),setTimeout(()=>{l=requestAnimationFrame(e)},1e3/t)}():function e(){m(),l=requestAnimationFrame(e)}()};let c=!1;const m=()=>{if(0==r.StateMachine.activeCount)return;if(s=(window.pageYOffset||o.scrollTop)-(o.clientTop||0),s==a&&!c)return;a=s,document.body.setAttribute("data-scroll-top",s),c=!1,r.StateMachine.elements.filter(e=>e.ratio>0).forEach(e=>{let t=e.keyframes,n=e.domElement,r=n.offsetTop;"relative"==i.AnimationSettings.mode&&t.forEach((e,t)=>{let i=r+e.offset-window.innerHeight;e.absOffset=i,n.setAttribute("data-kf-"+t,i)});for(let e=0;e<t.length-1;e++){let r=t[e],i=t[e+1],a=r.absOffset,o=i.absOffset,l=s<a,c=s>o;if(l||c){let e=l?r:i;return void Object.keys(e.props).forEach((t,r)=>{let i=e.props[t],s=d(i.value);v(n,t,s)})}let m=(s-a)/(o-a);Object.keys(r.props).forEach(e=>{let t=u(r.props[e].value,i.props[e].value,m),s=d(t);v(n,e,s)})}})};n.RenderLoop=m;let u=(e,t,n)=>{var r,i=e.length;if(i!==t.length)throw"Can't interpolate between \""+e[0]+'" and "'+t[0]+'"';var s=[e[0]];for(r=1;r<i;r++)s[r]=e[r]+(t[r]-e[r])*n;return s},d=e=>{let t=1;return e[0].replace(/\{\?\}/g,()=>e[t++])},v=(e,t,n)=>{let r=e.style,i=t.match(/-./g);if(null!=i){let e=i[0].toUpperCase();r[t.replace(i[0],e).replace("-","")]=n}else r[t]=n};n.StopRenderLoop=()=>{cancelAnimationFrame(l)};n.ForceRenderLoop=()=>{c=!0}},{"./AnimationStateMachine":2,"./Settings":9}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.OverrideDefaultAnimationSettings=n.AnimationSettings=n.OverrideDefaultObserverSettings=n.ObserverSettings=void 0;const r={delay:0,offset:0,mode:"relative",observableAttrName:"data-aiobserve",enterIntersectionClassName:"aio-enter",exitIntersectionClassName:"aio-exit",repeat:!1,threshold:0,root:null,rootMargin:"0px 0px 0px 0px",threshold:0,trackMutations:!0};let i=null;n.ObserverSettings=i;n.OverrideDefaultObserverSettings=e=>(n.ObserverSettings=i={...r,...e},i);const s={gridHelper:!1,trackMutations:!0,fps:null,deactivateBelow:1025};let a=null;n.AnimationSettings=a;n.OverrideDefaultAnimationSettings=e=>(n.AnimationSettings=a={...s,...e},a)},{}]},{},[1]);
//# sourceMappingURL=animate-io.min.js.map
